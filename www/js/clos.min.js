function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function ca(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function da(a){if(!(a instanceof Array)){a=ca(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
var ea="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},fa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function ha(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var k=ha(this);function y(a,b){if(b)a:{var c=k;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&fa(c,a,{configurable:!0,writable:!0,value:b})}}var ia;
if("function"==typeof Object.setPrototypeOf)ia=Object.setPrototypeOf;else{var ja;a:{var ka={Mb:!0},ma={};try{ma.__proto__=ka;ja=ma.Mb;break a}catch(a){}ja=!1}ia=ja?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var na=ia;
function A(a,b){a.prototype=ea(b.prototype);a.prototype.constructor=a;if(na)na(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c]}y("Array.prototype.findIndex",function(a){return a?a:function(b,c){a:{var d=this;d instanceof String&&(d=String(d));for(var e=d.length,f=0;f<e;f++)if(b.call(c,d[f],f,d)){b=f;break a}b=-1}return b}});
y("Array.prototype.fill",function(a){return a?a:function(b,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}});function oa(a){return a?a:Array.prototype.fill}y("Int8Array.prototype.fill",oa);y("Uint8Array.prototype.fill",oa);y("Uint8ClampedArray.prototype.fill",oa);y("Int16Array.prototype.fill",oa);y("Uint16Array.prototype.fill",oa);y("Int32Array.prototype.fill",oa);
y("Uint32Array.prototype.fill",oa);y("Float32Array.prototype.fill",oa);y("Float64Array.prototype.fill",oa);
function pa(a,b,c,d){var e=this;this.canvas=document.createElement("canvas");this.canvas.width=c*a;this.canvas.height=c*b;this.a=this.canvas.getContext("2d");this.canvas.style.marginLeft="auto";this.canvas.style.marginRight="auto";this.canvas.style.display="block";this.m=new qa(new E(0,0),this.canvas.width,this.canvas.height);document.body.appendChild(this.canvas);this.c=c;this.M=d;this.children=[];this.Pa=[];this.pb=[];this.b=null;this.i=0;this.g=[];this.v=0;this.J=null;this.L={qa:null,fa:null};
this.wb=[];document.addEventListener("keydown",function(f){e.L.fa&&e.L.fa(f);e.g.forEach(function(g){g.L.fa&&g.L.fa(f)})});document.addEventListener("keyup",function(f){e.L.qa&&e.L.qa(f);e.g.forEach(function(g){g.L.qa&&g.L.qa(f)})})}pa.prototype.start=function(){this.v=setInterval(this.F.bind(this),16.666);this.i=Date.now()};pa.prototype.stop=function(){clearInterval(this.v)};function ra(a){a.a.clearRect(0,0,a.canvas.width,a.canvas.height)}
pa.prototype.F=function(){var a=this;ra(this);var b=Date.now(),c=(b-this.i)/1E3;this.wb.forEach(function(d){d.update(c)});this.i=b;this.Pa.forEach(function(d){if(d.Pa)d.Pa.some(function(e){if(e.I.j.X&&e.active)return e.update(c),!0});else if(d.I.j.X&&d.active)return d.update(c),!0});this.J&&(this.J.update(),sa(this.J,c));this.g.forEach(function(d){!d.fixed&&d.active&&(d.ua||(d.position.x+=d.speed.x*c),d.va||(d.position.y+=d.speed.y*c));ta(d);ua(d)});this.g.forEach(function(d){d.wa&&(d.ba=(d.j.H.y+
.5*d.height)/a.c*a.M.Ea,d.ca=(d.j.H.y+.5*d.height)/a.c*a.M.Fa);d.Ya=d.j.H.x+d.width-a.M.Ea+d.ba>a.m.position.x&&d.j.H.x+d.ba<a.m.position.x+a.m.width&&d.j.H.y+d.height-a.M.Fa+d.ca>a.m.position.y&&d.j.H.y+d.ca<a.m.position.y+a.m.height?!0:!1});this.pb.forEach(function(d){var e=[];d.na.forEach(function(f){f.Ya&&e.push(f)});(function(){for(var f=0,g=[];f<d.B.children.length;){var m=d.B.children[f];m.frame?(g.push(m),d.B.children.splice(f,1)):f++}g.forEach(function(l){0>I(e,l)&&d.B.children.push(l)})})();
e.forEach(function(f){function g(p,q,r){do if(0<q)q--;else break;while(r[q].frame&&r[q].pa>p.pa);if(r[q].frame){for(;r[q].frame&&r[q].pa===p.pa&&r[q].position.x>p.position.x;)if(0<q)q--;else break;q++}else q++;return q}var m=0,l=0,n=!1,h=Math.floor(f.position.y/a.c)+Math.floor((f.position.y+f.height)/a.c)+1;do d.B.children[m].frame||(l===h?(d.B.children.splice(g(f,m,d.B.children),0,f),n=!0):l++),m++;while(!n)})});wa(this);this.g.forEach(function(d){var e=d.j.H.x+.5*d.width-a.m.position.x,f=d.j.H.y+
.5*d.height-a.m.position.y;d.Ya&&(a.a.save(),a.a.translate(e+d.ba,f+d.ca),a.a.rotate(d.angle),a.a.scale(d.j.ha.x,d.j.ha.y),a.a.globalAlpha=d.j.Ra,d.Rb&&a.a.scale(-1,1),d.type===J.a.la?a.a.drawImage(d.vb.image,d.Z.position.x,d.Z.position.y,d.Z.width,d.Z.height,-.5*d.width,-.5*d.height,d.Z.width,d.Z.height):d.type===J.a.Wa?(a.a.font=d.frame.font,a.a.fillStyle=d.frame.fillStyle,a.a.fillText(d.frame.text,-.5*d.width,.5*d.height)):d.type===J.a.Ga&&d.frames.forEach(function(g){xa(a.a,-.5*d.width,-.5*d.height,
g.bb,g.fillStyle,null,null)}),a.a.restore())});this.b.update(c);this.g.forEach(function(d){d.active&&d.update(c)})};pa.prototype.u=function(a){a.parent&&a.parent.removeChild(a);this.children.push(a);a.parent=this;wa(this);ta(a);ua(a);ya(a)};pa.prototype.removeChild=function(a){this.children.splice(I(this.children,a,null),1);wa(this)};function za(a,b){a.Pa.push(b);return b}
function wa(a){a.g.length=0;for(var b=[],c=null,d=0;d<a.children.length;d++){if(a.children[d].visible){c=a.children[d];b.push(c);var e=!1}else e=!0;for(;!e;){for(var f=!0,g=c.eb;g<c.children.length;g++)if(c.children[g].visible){c.eb=g+1;c=c.children[g];b.push(c);f=!1;break}c.eb=0;f&&(c.parent!==a?c=c.parent:(e=!0,a.g=a.g.concat(b),b.length=0))}}}
function Aa(a,b,c,d){d=void 0===d?{Ea:0,Fa:0,Ha:0}:d;this.f=new pa(a,b,c,d);this.canvas=this.f.canvas;this.g=this.f.a;this.ga=[];this.a=0;this.F=this.canvas.width;this.v=this.canvas.height;this.c=c;this.M=d}
function Ba(a){function b(){if(a.ga[a.a]){var c=a.ga[a.a];ra(a.f);var d=c.rows,e=[];a.canvas.width=d*c.Ca+2*d;var f=Math.ceil(c.ub.length/d);a.canvas.height=f*c.Ba+2*f;var g=0,m=-1;c.ub.forEach(function(l,n){n/d===g+1?(g++,m=0):m++;l.forEach(function(h){a.g.save();xa(a.g,m*c.Ca+2*m,g*c.Ba+2*g,h.bb,h.fillStyle,h.strokeStyle,h.lineWidth);a.g.restore();h.name&&e.push(new Da(new E(m*c.Ca+2*m,g*c.Ba+2*g),c.Ca,c.Ba,h.name))})});c.image.src=a.canvas.toDataURL("image/png");c.tb=e;c.image.onload=function(){a.a<
a.ga.length-1?(a.a++,b()):(a.canvas.width=a.F,a.canvas.height=a.v,a.create())}}}a.F=a.canvas.width;a.v=a.canvas.height;a.a=0;b()}Aa.prototype.i=function(){};Aa.prototype.create=function(){this.f.b=this};Aa.prototype.update=function(){};function Ea(a){var b=Math.ceil(0);a=Math.floor(a);return Math.floor(Math.random()*(a-b))+b}function Fa(){var a=L.a.Va-1;var b=Math.ceil(0);a=Math.floor(a);return Math.floor(Math.random()*(a-b+1))+b}function Ga(a){return a[Ea(a.length)]}
function I(a,b,c){c=void 0===c?null:c;var d=-1,e=!1;return d=c?a.findIndex(function(f){c(f)===b&&(e=!0);return e}):a.findIndex(function(f){f===b&&(e=!0);return e})}function Ha(a,b,c){b=I(a,b,c);return a[b]}function E(a,b){this.x=void 0===a?0:a;this.y=void 0===b?0:b}E.prototype.compare=function(a){return a?a.x===this.x&&a.y===this.y?!0:!1:!1};function N(a,b){a.x=b.x;a.y=b.y;return a}E.prototype.add=function(a){a&&(this.x+=a.x,this.y+=a.y)};
function Da(a,b,c,d){this.position=a;this.width=b;this.height=c;this.name=void 0===d?"":d}function qa(a,b,c){Da.call(this,a,b,c)}A(qa,Da);function P(){this.a=[]}function Ia(a,b){b.reset();a.a.push(b)}function Ja(a,b){for(var c=0;c<b.length;c++)Ia(a,b[c])}function S(a,b){if(0<a.a.length){var c=a.a[a.a.length-1];c.set(b);a.a.splice(a.a.length-1,1)}else c=a.g(b);return c}P.prototype.g=function(){return{}};
function Ka(a,b,c,d){this.image=document.createElement("img");this.tb=null;this.rows=a;this.Ca=b;this.Ba=c;this.ub=d}
function J(a,b,c,d,e,f,g,m,l,n){g=void 0===g?a.ga[0]:g;l=void 0===l?g.Ca:l;n=void 0===n?g.Ba:n;this.active=!0;this.b=a;this.type=b;this.W=[];this.frame=this.frames=null;this.vb=g;this.width=l;this.height=n;this.wa=void 0===m?!1:m;this.nb=this.width;this.mb=this.height;this.Z=null;La(this,b,c);this.Rb=!1;this.lb=new E(0,0);this.ca=this.ba=0;this.Ya=!0;this.pa=0;f?this.fixed=f:this.fixed=!1;this.position=new E(d,e);this.speed=new E(0,0);this.g=new E(0,0);this.children=[];this.parent=null;this.visible=
!0;this.L={qa:null,fa:null};this.angle=0;this.scale=new E(1,1);this.eb=0;this.alpha=1;this.O=new E(0,0);this.va=this.ua=!1;this.Ja=null;this.Oa=new Oa(a,this);this.qb=new Oa(a,this);this.j={H:new E(1,1),ha:new E(1,1),Ra:1,X:!1};ua(this);this.fb=!0}function ya(a){a.O.x=Math.floor(Math.floor(a.position.x/a.b.f.c));a.O.y=Math.floor(Math.floor(a.position.y/a.b.f.c))}
function ta(a){N(a.j.H,a.position);N(a.j.ha,a.scale);a.j.Ra=a.alpha;a.j.X=a.visible;for(var b=a.parent;b!==a.b.f&&b;)a.j.H.x+=b.position.x,a.j.H.y+=b.position.y,a.j.ha.x*=b.scale.x,a.j.ha.y*=b.scale.y,a.j.Ra*=b.alpha,a.j.X&&!b.visible&&(a.j.X=!1),b=b.parent,a.j.X&&!b&&(a.j.X=!1)}
function La(a,b,c){b=void 0===b?J.a.la:b;c=void 0===c?[]:c;Array.isArray(c)?a.frames=c:a.frames=[c];a.frame=a.frames[0];a.Z=null;if(b===J.a.la)Pa(a);else if(b===J.a.Wa){b=a.b;var d=a.frame;c=b.f.a.font;b.f.a.font=d.font;d=b.f.a.measureText(d.text).width;b.f.a.font=c;a.width=d}}function Pa(a){for(var b=0;b<a.frames.length;b++)a.W.push(Ha(a.vb.tb,a.frames[b],function(c){return c.name}));a.Z=a.W[0]}J.prototype.update=function(){};function Qa(a,b){a.visible=b;wa(a.b.f);ta(a)}
function ua(a){a.g.x=a.j.H.x+.5*a.width;a.g.y=a.j.H.y+.5*a.height}J.prototype.u=function(a){a.parent&&a.parent.removeChild(a);this.children.push(a);a.parent=this;wa(this.b.f);ta(a);ua(a);ya(a)};J.prototype.removeChild=function(a){var b=-1;b=this.children.findIndex(function(c){return c===a?!0:!1});0<=b&&(this.children.splice(b,1),a.parent=null);wa(this.b.f)};function Ra(a,b){b.forEach(function(c){a.removeChild(c)})}
function Sa(a){a.children.forEach(function(b){b.parent=null});a.children.length=0;wa(a.b.f)}J.prototype.reset=function(){this.position.x=0;this.position.y=0;this.speed.x=0;this.angle=this.speed.y=0};J.prototype.set=function(a){a.x?this.position.x=a.x:this.position.x=0;a.y?this.position.y=a.y:this.position.y=0;a.frames&&(this.W.length=0,La(this,a.type,a.frames));a.fixed?this.fixed=a.fixed:this.fixed=!1;Qa(this,!0);this.active=!0;ua(this);ya(this)};
k.Object.defineProperties(J,{a:{configurable:!0,enumerable:!0,get:function(){return{la:0,Wa:1,Ga:2}}},G:{configurable:!0,enumerable:!0,get:function(){return 0}}});function T(a,b,c){J.call(this,a,null,null,b,c,!0)}A(T,J);function Ta(a,b,c,d,e,f,g){J.call(this,a,J.a.la,b,c,d,!0,void 0,e,f,g)}A(Ta,J);k.Object.defineProperties(Ta,{G:{configurable:!0,enumerable:!0,get:function(){return 1}}});function Ua(){this.a=[]}A(Ua,P);Ua.prototype.g=function(a){return new Ta(a.b,a.frames,a.x,a.y,a.wa,a.width,a.height)};
function Va(a){J.call(this,a,null,null,0,0,!0,!1);this.F=new Ua;this.Da=new Ua;this.F=new Ua;this.Qa=new Ua;this.da=[this.F,this.Da,this.F,this.Qa];this.na=[];this.ya=[];this.Aa=[];this.N=[];this.xa=[];this.a=[this.xa,this.Aa,this.ya,this.N];this.v=new T(a,0,0);this.B=new T(a,0,0);this.i=new T(a,0,0);this.u(this.v);this.u(this.B);this.u(this.i)}A(Va,J);function Wa(a,b){(b=void 0===b?null:b)&&Xa(b,a.N,!0);Sa(a.v);Sa(a.B);Sa(a.i);a.a.forEach(function(c,d){Ja(a.da[d],c);c.length=0})}
function Ya(a,b,c){c=void 0===c?null:c;for(var d=0;d<b.A;d++){a.B.u(new T(a.b,0,0));a.B.u(new T(a.b,0,0));for(var e=0;e<b.s;e++)if(b.h[e][d].T)for(var f=0;4>f;f++){var g=S(a.da[f],{b:a.b,frames:b.h[e][d].frames[f],x:e*a.b.f.c,y:d*a.b.f.c,wa:!0,width:a.b.c,height:a.b.c});a.a[f].push(g);1!==f&&2!==f||a.B.children[a.B.children.length-1-(1-(f-1))].u(g);1===f?e<b.s-1&&0<b.h[e+1][d].T&&Qa(g,!1):(2===f||0===f)&&d<b.A-1&&0<b.h[e][d+1].T&&Qa(g,!1)}}for(d=1;d<a.B.children.length-1;d+=2)e=ca([a.B.children[d+
1],a.B.children[d]]),a.B.children[d]=e.next().value,a.B.children[d+1]=e.next().value;wa(a.b.f);a.a[3].forEach(function(m){a.i.u(m)});a.a[0].forEach(function(m){a.v.u(m)});c&&(Za(c,b),a.i.children.forEach(function(m){$a(c,m)}))}function ab(a){var b=bb.G;a.N.forEach(function(c){c.Ja=b})}function cb(a,b){a.na.push(b);a.B.u(b)}function db(a,b){b.forEach(function(c){a.na.splice(I(a.na,c),1);a.B.removeChild(c)})}
function U(a,b,c,d){this.I=a;this.duration=b;d?this.type=d:this.type=U.a;this.$=null;this.xa=this.hb=c;this.g=0;this.active=!1;this.a=0;this.Qa=null;this.da=!0;this.W=this.v=this.ya=0}U.prototype.sa=function(){};U.prototype.F=function(a){a&&(this.duration=a)};function eb(a){a.W=2*a.v/Math.pow(a.duration,2);a.Qa=a.W*a.duration;a.W*=-1}
U.prototype.update=function(a){if(this.active&&a&&(this.a+=a,this.a>this.duration&&(this.a=this.duration),this.type===U.a?this.g=this.a*this.ya/this.v:this.type===U.g&&(this.g=(this.Qa*this.a+.5*this.W*Math.pow(this.a,2))/this.v),this.da||(this.g=1-this.g),this.a===this.duration)){this.a=0;this.update(0);a:{if(0<=this.hb&&(this.xa--,0>this.xa)){this.active=!1;this.xa=this.hb;this.da=!0;this.a=this.g=0;this.$&&this.$(this);a=!0;break a}a=!1}a||(this.da=this.da?!1:!0)}};
k.Object.defineProperties(U,{a:{configurable:!0,enumerable:!0,get:function(){return 1}},g:{configurable:!0,enumerable:!0,get:function(){return 2}}});function W(a,b,c,d,e,f){U.call(this,a,b,c,d);this.Da=this.Aa=0;this.i=new E(0,0);this.N=new E(0,0);this.sa(e,f)}A(W,U);W.prototype.update=function(a){U.prototype.update.call(this,a)};
W.prototype.sa=function(a,b){N(this.i,a);N(this.N,b);this.Aa=this.N.x-this.i.x;this.Da=this.N.y-this.i.y;a=this.i;b=this.N;this.v=Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2));this.F(null);eb(this)};W.prototype.F=function(a){U.prototype.F.call(this,a);this.ya=this.v/this.duration};function fb(a,b,c,d,e,f){W.call(this,a,b,c,d,e,f)}A(fb,W);fb.prototype.update=function(a){W.prototype.update.call(this,a);this.active&&(this.I.position.x=this.i.x+this.g*this.Aa,this.I.position.y=this.i.y+this.g*this.Da)};
function gb(a,b,c,d,e,f){W.call(this,a,b,c,d,e,f)}A(gb,W);gb.prototype.update=function(a){W.prototype.update.call(this,a);this.active&&(this.I.scale.x=this.i.x+this.g*this.Aa,this.I.scale.y=this.i.y+this.g*this.Da)};function hb(a,b,c,d,e,f){U.call(this,a,b,c,d);this.i=0;this.sa(e,f)}A(hb,U);hb.prototype.sa=function(a,b){this.i=a;this.v=b-a;this.F(null);eb(this)};hb.prototype.F=function(a){U.prototype.F.call(this,a);this.ya=this.v/this.duration};
hb.prototype.update=function(a){U.prototype.update.call(this,a);this.active&&(this.I.alpha=this.i+this.g*this.v)};function xa(a,b,c,d,e,f,g){b||(b=0);c||(c=0);e&&(a.fillStyle=e);f&&(a.strokeStyle=f);g&&(a.lineWidth=g);a.beginPath();a.moveTo(d[0].x+b,d[0].y+c);for(f=1;f<d.length;f++)a.lineTo(d[f].x+b,d[f].y+c),e||a.stroke();a.closePath();e&&a.fill()}
function ib(a,b,c,d,e){this.bb=a;this.name=void 0===b?"":b;this.fillStyle=void 0===c?null:c;this.strokeStyle=void 0===d?null:d;this.lineWidth=void 0===e?null:e}function jb(a,b,c,d,e,f){return new ib([new E(a,b),new E(a+c,b),new E(a+c,b+d),new E(a,b+d),new E(a,b)],e,f,null,null)}
function kb(a,b,c){c=void 0===c?null:c;var d=null;d="object"===typeof c?function(g,m,l){m[l].push(JSON.parse(JSON.stringify(g)))}:function(g,m,l){m[l].push(g)};this.h=[];this.s=a;this.A=b;for(var e=0;e<a;e++){this.h.push([]);for(var f=0;f<b;f++)d(c,this.h,e)}this.length=a*b;this.a=lb(this)}kb.prototype.getAll=function(){return this.a};function lb(a){for(var b=[],c=0;c<a.length;c++){var d=Math.floor(c/a.s),e=c-d*a.s;b.push({ea:a.h[e][d],x:e,y:d})}return b}
function mb(a,b,c){kb.call(this,b,c,{S:[],T:!1});this.b=a}A(mb,kb);function Za(a,b){b.getAll().forEach(function(c){c.ea.T&&(a.h[c.x][c.y].T=!0)})}function $a(a,b){var c=nb(a,b);a.h[c.x][c.y].S.push(b)}function ob(a,b,c){c=void 0===c?!1:c;a.getAll().some(function(d){if(d.ea.S.some(function(e,f){if(e===b)return d.ea.S.splice(f,1),c&&(d.ea.T=!1),!0}))return!0})}function Xa(a,b,c){c=void 0===c?!1:c;b.forEach(function(d){ob(a,d,c)})}
mb.prototype.update=function(){var a=this,b=[];this.getAll().forEach(function(c){c.ea.S.forEach(function(d){if(!d.fixed){var e=new E(c.x,c.y),f=nb(a,d);f.compare(e)||b.push({I:d,Na:e,Za:f})}})});b.forEach(function(c){var d=I(a.h[c.Na.x][c.Na.y].S,c.I,null);a.h[c.Na.x][c.Na.y].S.splice(d,1)});b.forEach(function(c){a.h[c.Za.x][c.Za.y].S.push(c.I);N(c.I.O,c.Za);c.I.qb.U()})};
function sa(a,b){a.getAll().forEach(function(c){c.ea.S.forEach(function(d){d.ua=!1;d.va=!1})});a.getAll().forEach(function(c){c.ea.S.forEach(function(d){d.j.X&&pb(a,d,c.x,c.y,b)})})}
function pb(a,b,c,d,e){function f(C,K){var t=0;K&&!C.va&&(t=C.speed.y*e);return C.position.y+C.lb.y+t+C.height/2}function g(C,K){var t=0;K&&!C.ua&&(t=C.speed.x*e);return C.position.x+C.lb.x+t+C.width/2}var m=!1;m=void 0===m?!1:m;e=void 0===e?0:e;var l=!1,n=[],h=[],p=0,q=0,r=0,v=0;h.push(new E(g(b,!0),f(b,!1)));h.push(new E(g(b,!1),f(b,!0)));var u=c-3;0>u&&(u=0);var D=c+3;D>a.s&&(D=a.s);c=d-3;0>c&&(c=0);var B=d+3;B>a.A&&(B=a.A);d={};for(d.ja=u;d.ja<D;d={ja:d.ja},d.ja++)for(u={},u.ka=c;u.ka<B;u={ka:u.ka},
u.ka++)a.h[d.ja][u.ka].S.forEach(function(C,K){return function(t){if(t.j.X&&t!==b&&t.constructor.G&b.Ja){n.length=0;n.push(new E(g(t,!0),f(t,!1)));n.push(new E(g(t,!1),f(t,!0)));l=!1;for(var z=0;2>z;z++)p=n[z].x-h[z].x,q=n[z].y-h[z].y,r=t.nb/2+b.nb/2,v=t.mb/2+b.mb/2,Math.abs(p)<r&&Math.abs(q)<v&&(l=!0,m?(C.ka=B,K.ja=D):0===z?b.fb&&(t.ua=!0):b.fb&&(t.va=!0));!m&&l&&(b.Oa.U(b,t),t.Oa.U(t,b))}}}(u,d))}
function nb(a,b){var c=new E(b.O.x,b.O.y);b.speed.x?b.ua&&b.speed.x?c.x=Math.round(b.position.x/a.b.f.c):0>b.speed.x&&b.position.x<=(c.x-1)*a.b.f.c?c.x--:0<b.speed.x&&b.position.x>=(c.x+1)*a.b.f.c&&c.x++:c.x=Math.round(b.position.x/a.b.f.c);b.speed.y?b.va&&b.speed.y?c.y=Math.round(b.position.y/a.b.f.c):0>b.speed.y&&b.position.y<=(c.y-1)*a.b.f.c?c.y--:0<b.speed.y&&b.position.y>=(c.y+1)*a.b.f.c&&c.y++:c.y=Math.round(b.position.y/a.b.f.c);return c}
function qb(){this.endTime=.1;this.a=0;this.g=!1;this.$=null;this.active=!1}qb.prototype.update=function(a){!this.g&&this.active&&(this.a+=a,this.a>this.endTime&&(this.g=!0,this.$&&this.$(this)))};qb.prototype.reset=function(a){this.active=a;this.g=!1;this.a=0};function Oa(a,b){this.b=a;this.I=b;this.a=[]}
Oa.prototype.U=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];var d=this;this.a.forEach(function(e){for(var f=d.I;f&&(e.Tb!==f||(e.Nb.apply(e,da(b)),!e.terminate));)f.parent?f=f.parent:f=null})};Oa.prototype.addListener=function(a,b,c){a=new rb(a,b,void 0===c?!1:c);this.a.push(a);return a};function rb(a,b,c){this.Tb=a;this.Nb=b;this.terminate=void 0===c?!1:c};function L(){this.Y=[];this.Y.push({id:L.a.E,K:new E(1,0),Ia:[]},{id:L.a.Eb,K:new E(0,-1),Ia:[]},{id:L.a.Kb,K:new E(-1,0),Ia:[]},{id:L.a.Va,K:new E(0,1),Ia:[]},{id:L.a.NONE,K:new E(0,0),Ia:[]})}k.Object.defineProperties(L,{a:{configurable:!0,enumerable:!0,get:function(){return{E:1,Eb:2,Kb:3,Va:4,NONE:5}}},g:{configurable:!0,enumerable:!0,get:function(){return new L}}});function sb(a,b){this.h=[];this.s=a;this.A=b;for(var c=0;c<a;c++){var d=[];this.h.push(d);for(var e=0;e<b;e++)d.push(!1)}}
function tb(a){a.h.forEach(function(b){for(var c=0;c<b.length;c++)b[c]=!1})}function ub(a,b){this.h=[];this.s=a;this.A=b;this.ma=L.g;for(var c=0;c<a;c++){var d=[];this.h.push(d);for(var e=0;e<b;e++)d.push({filled:!1,Sb:!1,oa:[!0,!0,!0,!0]})}}ub.prototype.forEach=function(a){for(var b=0;b<this.s;b++)for(var c=0;c<this.A;c++)a(this.h[b][c],b,c)};function vb(){this.a=[]}A(vb,P);vb.prototype.g=function(a){return new wb(a.position,a.direction)};function xb(){this.a=[]}A(xb,P);
xb.prototype.g=function(a){return new X(a.h,a.start,a.end,a.o,a.D)};function yb(){this.a=[]}A(yb,P);yb.prototype.g=function(a){return new zb(a.l,a.start,a.end,a.C,a.D,a.V)};function wb(a,b){this.position=a?new E(a.x,a.y):new E(0,0);b?this.direction=b:this.direction=L.a.NONE}wb.prototype.reset=function(){this.direction=L.a.NONE;this.position.x=0;this.position.y=0};wb.prototype.set=function(a){N(this.position,a.position);this.direction=a.direction};
function X(a,b,c,d,e){this.h=a;this.start=b?new E(b.x,b.y):new E(0,0);this.end=c?new E(c.x,c.y):new E(0,0);this.D=e;if(d)for(this.o=[],a=0;a<d.length-1;a++)this.o.push(S(this.D,{position:d[a].position,direction:d[a].direction}));else this.o=[],this.o.push(S(this.D,{position:b,direction:L.a.NONE}));this.Ka=this.cb=!1}X.prototype.reset=function(){Ja(this.D,this.o);this.o.length=0;this.Ka=this.cb=!1};
X.prototype.set=function(a){N(this.start,a.start);N(this.end,a.end);this.h=a.h;if(a.o)for(var b=0;b<a.o.length-1;b++)this.o.push(S(this.D,{position:a.o[b].position,direction:a.o[b].direction}));else this.o.push(S(this.D,{position:a.start,direction:L.a.NONE}))};k.Object.defineProperties(X,{a:{configurable:!0,enumerable:!0,get:function(){return{Bb:1,kb:2,ib:4,Fb:8}}}});
function zb(a,b,c,d,e,f){this.l=a;this.D=e;this.V=f;b||(b=new E(0,0));c||(c=new E(0,0));this.a=new sb(a.s,a.A);d?this.C=d:(this.C=[],this.C.push(S(this.V,{h:a,start:b,end:c,o:null,D:this.D})))}
zb.prototype.process=function(){var a=0,b=0,c=!1,d=!1;if(this.C[0].start.compare(this.C[0].end))d=!0;else{do if(this.C[a].cb||this.C[a].Ka)a<this.C.length-1?a++:d?(a=0,d=!1):c=!0;else{a:{var e=this.C[a];var f=this.a,g=e.o[e.o.length-1],m=0,l=new E(0,0);g.direction!==L.a.NONE&&(m=g.direction);for(var n=m;n<L.a.Va;n++){m=e.h.ma.Y[n];var h=g.position,p=m.K;N(l,new E(h.x+p.x,h.y+p.y));if(h=l.x<e.h.s&&0<=l.x&&l.y<e.h.A&&0<=l.y)if(h=!e.h.h[l.x][l.y].filled){h=!1;for(p=0;p<e.o.length;p++)if(e.o[p].position.x===
l.x&&e.o[p].position.y===l.y){h=!0;break}h=!h}if(h){n=!1;l.compare(e.end)&&(n=!0);if(n){g.direction=m.id;e.cb=!0;e.o.push(S(e.D,{position:l,direction:L.a.NONE}));e=X.a.kb;break a}n=X.a.ib;f.h[l.x][l.y]?e.Ka=!0:f.h[l.x][l.y]=!0;g.direction=m.id;e.o.push(S(e.D,{position:l,direction:L.a.NONE}));e=n;break a}}e.Ka=!0;e=X.a.Bb}e===X.a.ib?(this.C.push(S(this.V,{h:this.l,start:this.C[a].start,end:this.C[a].end,o:this.C[a].o,D:this.D})),a++,d||(d=!0)):e===X.a.Fb?d||(d=!0):e===X.a.kb&&(b=a,c=!0,d||(d=!0))}while(!c)
}return{Xb:d,rb:b}};zb.prototype.set=function(a){this.l=a.l;this.C.push(S(this.V,{h:this.l,start:a.start,end:a.end,o:null,D:this.D}));this.l.s!==this.a.s||this.l.A!==this.a.A?this.a=new sb(this.l.s,this.l.A):tb(this.a)};zb.prototype.reset=function(){Ja(this.V,this.C);this.C.length=0};function Ab(a,b,c){this.D=a;this.V=b;this.g=c;this.l=null;this.a=[]}
function Eb(a,b,c){function d(l){f.push(new E(l.x,l.y));for(var n=l.x-1;n<l.x+1;n++)for(var h=l.y-1;h<l.y+1;h++)Fb(e,new E(n,h))}for(var e=[],f=[],g=3;g<a.l.s-2-2;g++)for(var m=3;m<a.l.A-2-2;m++)e.push(new E(g,m));for(g={};0<b&&0<e.length;)g.aa=Ga(e),0===f.length?(d(g.aa),b--):f.some(function(l){return function(n){if(6>Math.abs(l.aa.x-n.x)&&6>Math.abs(l.aa.y-n.y))return!0}}(g))?Fb(e,g.aa):(d(g.aa),b--),g={aa:g.aa};f.forEach(function(l){for(var n=l.x-1;n<l.x+1+1;n++)for(var h={},p=l.y-1;p<l.y+1+1;h=
{ia:h.ia},p++)h.ia=a.l.h[n][p],h.ia.filled=!0,h.ia.Sb=!1,h.ia.oa.forEach(function(q){return function(r,v){q.ia.oa[v]=!1}}(h)),Fb(c,new E(n,p))});return f}
function Gb(a,b,c,d){d=void 0===d?0:d;a.l=new ub(b,c);var e=[];b=[];var f=[];for(c=0;c<a.l.s;c++)for(var g=0;g<a.l.A;g++)e.push(new E(c,g));d=Eb(a,d,e);g=Ga(e);c=N(new E,g);g=Ga(e);g=N(new E,g);var m=!1,l={};do{var n=S(a.g,{l:a.l,start:c,end:g,C:null,D:a.D,V:a.V}),h=n.process();h.Xb?(h=n.C[h.rb],l.ta=L.a.NONE,h.o.forEach(function(p){return function(q){var r=a.l.h[q.position.x][q.position.y];q.direction!==L.a.NONE&&(r.oa[q.direction-1]=!1);if(p.ta!==L.a.NONE){var v=a.l.ma.Y[p.ta-1].K,u=I(a.l.ma.Y,
!0,function(D){var B=!1;D.K.x===-1*v.x&&D.K.y===-1*v.y&&(B=!0);return B});r.oa[u]=!1}p.ta=q.direction;r.filled=!0;Fb(e,q.position);f.push(new E(q.position.x,q.position.y))}}(l)),0<e.length?(N(c,Ga(f)),Fb(f,c),b=da(e).concat(),N(g,Ga(b)),Fb(b,g)):m=!0):(0<b.length||(N(c,Ga(f)),Fb(f,c),b=da(e).concat()),N(g,Ga(b)),Fb(b,g));Ia(a.g,n);l={ta:l.ta}}while(!m);a.a.length=0;d.forEach(function(p){var q=a.l.ma.Y[Fa()].K,r=I(a.l.ma.Y,!0,function(D){var B=!1;D.K.x===-1*q.x&&D.K.y===-1*q.y&&(B=!0);return B}),v=
2*q.x,u=2*q.y;a.a.push(new E(p.x+v,p.y+u));a.l.h[p.x+v][p.y+u].oa[r]=!1});return a.l}function Fb(a,b){var c=I(a,!0,function(d){var e=!1;d.x===b.x&&d.y===b.y&&(e=!0);return e});0<=c&&a.splice(c,1)};function Y(a,b,c,d){Aa.call(this,a,b,c,d);window.addEventListener("keydown",function(e){-1<[37,38,39,40].indexOf(e.keyCode)&&e.preventDefault()},!1)}A(Y,Aa);
Y.prototype.i=function(){Aa.prototype.i.call(this);var a=[],b=[],c=(88-this.c)/Math.cos(this.M.Ha);a.push(Hb(this,this.c/2,c,"w0",1,this.c/2));a.push(Hb(this,this.c,c,"w1",2));a.push(Hb(this,this.c/2,c,"w2",1));a.push(Hb(this,this.c,c,"w3",4));a.push(Hb(this,this.c,c,"w4",8));a.push(Hb(this,this.c,c,"w5",16));a.push(Hb(this,this.c,c,"w6",32));a.push([jb(0,0,0,0,"w7",Y.a.jb)]);a.push(Hb(this,this.c/3,c/8,"pg",7,0,0,Y.a.Ta,Y.a.Cb,Y.a.Db));a.push(Hb(this,2/3*this.c,2/3*c,"p1",7,0,0,Y.a.Sa,Y.a.zb,Y.a.Ab));
a.push(Hb(this,2/3*this.c,2/3*c,"p2",7,0,0,Y.a.Ua,Y.a.Ib,Y.a.Jb));b.push([jb(0,0,this.f.m.width,this.f.m.height,"b",Y.a.Lb)]);this.ga.push(new Ka(10,88,81,a));this.ga.push(new Ka(1,this.f.m.width,this.f.m.height,b));Ba(this)};Y.prototype.create=function(){var a=this;Aa.prototype.create.call(this);var b=new Ib(this,0,0);this.f.u(b);var c=new Jb(this,0,0);b.u(c);var d=new Kb(this,0,0);Qa(d,!1);b.u(d);this.f.start();this.f.L.fa=function(){c.visible&&(Qa(c,!1),Qa(d,!0),a.f.stop(),d.i(),a.f.start())}};
function Hb(a,b,c,d,e,f,g,m,l,n){e=void 0===e?7:e;f=void 0===f?0:f;g=void 0===g?0:g;m=void 0===m?Y.a.jb:m;l=void 0===l?Y.a.Gb:l;n=void 0===n?Y.a.Hb:n;var h=c*Math.sin(a.M.Ha);a=c*Math.cos(a.M.Ha);c=[];e&1&&(c.push(jb(0,h,b,35,d,m)),d="");e&2&&(c.push(new ib([new E(a+b,0),new E(a+b,35),new E(b,h+35),new E(b,h),new E(a+b,0)],d,n)),d="");e&4&&c.push(new ib([new E(a,0),new E(a+b,0),new E(b,h),new E(0,h),new E(a,0)],d,l));e&8&&c.push(new ib([new E(a+b,0),new E(b,h),new E(0,h),new E(a+b,0)],d,l));e&16&&
c.push(new ib([new E(a,0),new E(a+b,0),new E(0,h),new E(a,0)],d,l));e&32&&c.push(new ib([new E(a+b,0),new E(a+b,35),new E(0,h+35),new E(0,h),new E(a+b,0)],d,n));c.forEach(function(p){p.bb.forEach(function(q){q.x+=f;q.y+=g})});return c}k.Object.defineProperties(Y,{a:{configurable:!0,enumerable:!0,get:function(){return{jb:"#ff71ce",Gb:"#ff24b3",Hb:"#d6008d",Sa:"#01cdfe",zb:"#018fb2",Ab:"#015165",Ta:"#05ffa1",Cb:"#00b873",Db:"#006b43",Ua:"#b967ff",Ib:"#951aff",Jb:"#6e00cc",Lb:"#fffb9f"}}}});
function Lb(a,b,c,d){this.Qb=a;this.Wb=b;this.size=c;this.Ob=d}function Mb(a,b,c,d,e,f){e=void 0===e?Y.a.Ta:e;J.call(this,a,J.a.Wa,{font:"bold "+(void 0===f?32:f)+"px serif",text:d,fillStyle:e},b,c,!0)}A(Mb,J);function Ib(a,b,c){T.call(this,a,b,c);this.a=new J(a,J.a.la,["b"],0,0,!1,a.ga[1]);this.u(this.a)}A(Ib,T);Ib.prototype.update=function(){this.a.position.x=this.b.f.m.position.x;this.a.position.y=this.b.f.m.position.y};
function Jb(a,b,c){T.call(this,a,b,c);var d=this;b=new J(a,J.a.Ga,[new ib([new E(0,0),new E(450,250),new E(90,425),new E(0,0)],"",Y.a.Ua)],b,c,!0,!1);b.width=450;b.height=425;b.position.x=(a.f.m.width-b.width)/2;b.position.y=(a.f.m.height-b.height)/2;this.u(b);b=new Mb(a,0,0,"Information Super Highway",void 0,a.c);b.position.x=(a.f.m.width-b.width)/2;this.u(b);b=new Mb(a,0,0,"Press any key");b.position.x=(a.f.m.width-b.width)/2;b.position.y=a.f.m.height-2*b.height;this.u(b);var e=["w6","w6","w7"];
b=da(e).concat(["w4"]);c=da(["w0","w1","w2"]).concat(["w3"]);e=da(e).concat(["w5"]);var f=[[],c,b,e];b=[[0,0,2,1,0],[0,2,3,1,0],[2,3,0,1,0],[1,1,1,1,1],[0,0,0,1,0]];var g=[];[b,[[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1]],b].forEach(function(l){for(var n=new Va(a),h=new kb(5,5,{frames:[],T:!1,wa:!0}),p=0;5>p;p++)for(var q=0;5>q;q++)if(l[q][p]){var r=h.h[p][q];r.T=!0;r.frames=f[l[q][p]]}Ya(n,h);n.width=h.s*a.c;n.height=h.A*a.c;d.u(n);g.push(n)});var m=(5*g.length+(g.length-1))*a.c;
g.forEach(function(l,n){l.position.y=(d.b.f.m.height-l.height)/2;l.position.y+=(l.position.y+.5*l.height)/a.c*-a.M.Ea;l.position.x=(l.position.y+.5*l.height)/a.c*-a.M.Ea+(a.f.m.width-m)/2+m/g.length*n});za(a.f,new fb(g[0],1,0,U.a,new E(g[0].position.x,-g[0].height),new E(g[0].position.x,g[0].position.y))).active=!0;za(a.f,new fb(g[1],1,0,U.a,new E(g[1].position.x,a.f.m.height+g[1].height),new E(g[1].position.x,g[1].position.y))).active=!0;za(a.f,new fb(g[2],1,0,U.a,new E(g[2].position.x,-g[2].height),
new E(g[2].position.x,g[2].position.y))).active=!0}A(Jb,T);
function Kb(a,b,c){function d(){K.reset(!1);B.length=0;Wa(f.a,a.f.J);Ia(n,v);var w=f.a,G=v;w.na.splice(I(w.na,G),1);w.B.removeChild(G);ob(a.f.J,v);v=null;Ja(p,u);db(f.a,u);Xa(a.f.J,u);u.length=0;Ja(h,D);db(f.a,D);Xa(a.f.J,D);D.length=0;Ia(q,r);f.removeChild(r);r=null}function e(w,G,H){H=void 0===H?1:H;var Q=G.s*(H+1)+1,M=G.A*(H+1)+1,F=new kb(Q,M,{frames:[],T:!1,wa:!0}),R=new ub(Q,M);G.h.forEach(function(V,O){V.forEach(function(va,ba){va.oa.forEach(function(la,Ca){if(la){la=l.l.ma.Y[Ca].K;for(var Bb=
(H+1)*O+(1+H/2),ac=(H+1)*ba+(1+H/2),Ma=Bb-((H+1)*O+1),Na=-Ma-1;Na<Ma+1;Na++){var Cb=Bb+Na*(1-Math.abs(la.x))+la.x*(Ma+Math.abs(Math.min(la.x,0))),Db=ac+Na*(1-Math.abs(la.y))+la.y*(Ma+Math.abs(Math.min(la.y,0)));Ca=F.h[Cb][Db];Ca.T=!0;0===Ca.frames.length&&(Ca.frames=w,R.h[Cb][Db].filled=!0)}}})})});return{Ub:F,R:R}}T.call(this,a,b,c);var f=this;b=new vb;c=new xb;var g=new yb,m=new mb(a,100,100);a.f.J=m;this.a=new Va(a);this.u(this.a);a.f.pb.push(this.a);var l=new Ab(b,c,g),n=new Nb,h=new Ob,p=new Pb,
q=new Qb,r=null,v=null,u=[],D=[],B=[],C=0,K=new qb;a.f.wb.push(K);var t=new Oa(a,this);t.addListener(this,function(){D.forEach(function(w){w.navigate()});v.Yb()});K.$=function(){var w=C;B.length<w&&(w=B.length);do{var G=Ea(B.length);Qa(B[G],!0);B.splice(G,1);w--}while(0<w);0===B.length?t.U():K.reset(!0)};var z=[new Lb(10,5,5,0),new Lb(15,7,8,0),new Lb(50,10,10,1),new Lb(70,13,14,2)],x=0;this.i=function(w){w=void 0===w?z[x]:w;var G=Gb(l,w.size,w.size,w.Ob);G=e(["w0","w1","w2","w3"],G,3);Ya(f.a,G.Ub,
a.f.J);ab(f.a);f.a.a.forEach(function(V){V.forEach(function(O){O.visible&&(Qa(O,!1),B.push(O))})});C=Math.floor(.1*B.length);K.reset(!0);G=G.R;var H=[];G.forEach(function(V,O,va){V.filled||H.push(new E(O,va))});var Q=Ga(H);v=S(n,{b:a,x:Q.x*a.c,y:Q.y*a.c,R:G});v.ab.addListener(f,function(V){r.Pb(V);Qa(V,!1);V.active=!1;!u.some(function(O){return O.visible})&&x<z.length-1&&(f.b.f.stop(),d(),x++,f.i(z[x]),f.b.f.start())});v.$a.addListener(f,function(){f.b.f.stop();d();f.i(z[x]);f.b.f.start()});$a(a.f.J,
v);for(Q=0;Q<w.Qb;Q++){var M=S(h,{b:a,x:0,y:0,ob:H,R:G});D.push(M);$a(a.f.J,M);cb(f.a,M)}Q=da(H).concat();for(M=0;M<w.Wb;M++){var F=Ea(Q.length),R=Q[F];R=S(p,{b:a,xb:R.x,yb:R.y});u.push(R);Q.splice(F,1);$a(a.f.J,R);cb(f.a,R)}r=S(q,{b:a,x:0,y:0,R:G,Vb:u,sb:v});f.u(r);cb(f.a,v)}}A(Kb,T);function Z(a,b,c,d,e,f){e=void 0===e?2/3*a.c:e;f=void 0===f?2/3*a.c:f;J.call(this,a,J.a.la,b,c,d,!1,void 0,!0,e,f);this.v=new Oa(a,this)}A(Z,J);
function Rb(a,b,c){Z.call(this,a,["pg"],0,0,a.c/3,a.c/8);this.position.x=b*a.c+(a.c-this.width)/2;this.position.y=c*a.c+(a.c-this.height)/2;this.fb=!1}A(Rb,Z);Rb.prototype.set=function(a){Z.prototype.set.call(this,a);this.position.x=a.xb*this.b.c+(this.b.c-this.width)/2;this.position.y=a.yb*this.b.c+(this.b.c-this.height)/2};k.Object.defineProperties(Rb,{G:{configurable:!0,enumerable:!0,get:function(){return 32}}});
function bb(a,b,c,d){Z.call(this,a,["p2"],b,c);var e=this;this.position.x+=(a.c-this.width)/2;this.position.y+=(a.c-this.height)/2;this.ab=new Oa(a,this);this.$a=new Oa(a,this);this.F=3*this.b.c;var f=new E(1,1),g=new E(0,0),m=za(a.f,new gb(this,.5,0,U.a,f,g)),l=za(this.b.f,new hb(this,.2,11,U.a,1,.2)),n=!0;this.N=!1;this.pa=1;l.$=function(){n=!1};m.$=function(){e.$a.U()};this.v.addListener(this,function(){m.sa(f,g);m.active=!1;l.sa(1,.2);n=!0});this.Yb=function(){e.N=!0;l.active=!0};this.i=new E(0,
0);this.i.x=d.s*a.c;this.i.y=d.A*(a.c+(a.M.Fa+1));this.Oa.addListener(this,function(h,p){n||m.active||p.constructor.G!==Sb.G?p.constructor.G===Rb.G&&e.ab.U(p):m.active=!0});this.a={left:!1,right:!1,gb:!1,Xa:!1};this.L.fa=function(h){if(39===h.keyCode||"d"===h.key||"D"===h.key)e.a.right=!0;else if(37===h.keyCode||"a"===h.key||"A"===h.key)e.a.left=!0;if(38===h.keyCode||"w"===h.key||"W"===h.key)e.a.gb=!0;else if(40===h.keyCode||"s"===h.key||"S"===h.key)e.a.Xa=!0};this.L.qa=function(h){if(39===h.keyCode||
"d"===h.key||"D"===h.key)e.a.right=!1;else if(37===h.keyCode||"a"===h.key||"A"===h.key)e.a.left=!1;else if(38===h.keyCode||"w"===h.key||"W"===h.key)e.a.gb=!1;else if(40===h.keyCode||"s"===h.key||"S"===h.key)e.a.Xa=!1};this.Ja=Ta.G+Sb.G+Rb.G}A(bb,Z);
bb.prototype.update=function(){this.N&&(this.speed.x=0,this.speed.y=0,this.a.right?this.speed.x=this.F:this.a.left&&(this.speed.x=-this.F),this.a.gb?this.speed.y=-this.F:this.a.Xa&&(this.speed.y=this.F));this.b.f.m.position.x=this.g.x+this.b.canvas.width/2>this.i.x?this.i.x+this.ba-this.b.canvas.width:this.g.x>this.b.canvas.width/2?this.g.x+this.ba-this.b.canvas.width/2:this.ba;this.b.f.m.position.y=this.g.y+this.ca+this.b.canvas.height/2>this.i.y?this.i.y-this.b.canvas.height:this.g.y+this.ca>this.b.canvas.height/
2?this.g.y+this.ca-this.b.canvas.height/2:0};bb.prototype.reset=function(){Z.prototype.reset.call(this);this.ab.a.length=0;this.$a.a.length=0};bb.prototype.set=function(a){Z.prototype.set.call(this,a);this.i.x=a.R.s*this.b.c;this.i.y=a.R.A*(this.b.c+(this.b.M.Fa+1));this.position.x+=(this.b.c-this.width)/2;this.position.y+=(this.b.c-this.height)/2;this.scale.x=1;this.scale.y=1;this.N=!1;this.v.U()};k.Object.defineProperties(bb,{G:{configurable:!0,enumerable:!0,get:function(){return 2}}});
function Sb(a,b,c,d,e){function f(){var t=da(q).concat(),z=null,x=0;for(z=!1;!z;)x=Ea(t.length),a.f.J.h[t[x].x][t[x].y].S.some(function(w){if(w.constructor.G===bb.G||w.constructor.G===Sb.G)return!0})?t.splice(x,1):z=!0;z=t[x];t.splice(x,1);t=S(h,{l:r,start:z,end:Ga(t),C:null,D:l,V:n});x=t.process();return t.C[x.rb]}function g(){v=f();B=v.o[u].position;m.position.x=B.x*a.c+(a.c-m.width)/2;m.position.y=B.y*a.c+(a.c-m.height)/2}Z.call(this,a,["p1"],b,c);var m=this,l=new vb,n=new xb,h=new yb;this.pa=
1;var p=!1,q=d,r=e;this.v.addListener(this,function(t,z){q=t;r=z;u=0;D=null;p=!1;g()});var v=null,u=0,D=null,B=null;g();var C=1.5*a.c,K=new L;this.navigate=function(){var t=!1,z=K.Y[v.o[u].direction-1].K;D!==z&&(m.position.x=m.O.x*a.c+(a.c-m.width)/2,m.position.y=m.O.y*a.c+(a.c-m.height)/2);p?(m.speed.x=-z.x*C,m.speed.y=-z.y*C,0===u?(u=-1,p=!1):D=z):(m.speed.x=z.x*C,m.speed.y=z.y*C,0===z.x&&0===z.y?(p=!0,u--,t=!0):D=z);return t};this.qb.addListener(this,function(){p?u--:u++;m.navigate()&&m.navigate()});
this.Ja=bb.G}A(Sb,Z);Sb.prototype.reset=function(){Z.prototype.reset.call(this);this.Oa.a.length=0};Sb.prototype.set=function(a){Z.prototype.set.call(this,a);this.v.U(a.ob,a.R)};k.Object.defineProperties(Sb,{G:{configurable:!0,enumerable:!0,get:function(){return 4}}});
function Tb(a,b,c,d,e,f){function g(){K=S(B,{b:a,La:C.O.x,Ma:C.O.y,P:v,ra:C});p.u(K)}function m(){e.forEach(function(x){x=S(D,{b:a,La:x.O.x,Ma:x.O.y,P:v,za:x});h.u(x);u.push(x)})}function l(){r.h.forEach(function(F,R){for(F=0;F<r.A;F++)if(r.h[R][F].filled){for(var V=new E(R,F),O,va=!1,ba=F+1;!va&&ba<r.A;){O=r.h[R][ba];if(!O.filled||O.filled&&ba===r.A-1)va=!0,1<ba-F&&(O=new E(R,ba),ba===r.A-1&&O.y++,t.push([V,O]));ba++}F=ba}});for(var x=0;x<r.A;x++)for(var w=0;w<r.s;w++)if(r.h[w][x].filled){for(var G=
new E(w,x),H=null,Q=!1,M=w+1;!Q&&M<r.s;){H=r.h[M][x];if(!H.filled||H.filled&&M===r.s-1)Q=!0,1<M-w&&(H=new E(M,x),M===r.s-1&&H.x++,z.push([G,H]));M++}w=M}t.forEach(function(F){n.frames.push(jb(F[0].x*v,F[0].y*v,v,(F[1].y-F[0].y)*v,void 0,Y.a.Sa))});z.forEach(function(F){n.frames.push(jb(F[0].x*v,F[0].y*v,(F[1].x-F[0].x)*v,v,void 0,Y.a.Sa))})}T.call(this,a,b,c);var n=new J(a,J.a.Ga,null,0,0,!0);n.frames.length=0;this.u(n);var h=new T(a,0,0);this.u(h);var p=new T(a,0,0);this.u(p);var q=this.b.canvas.width/
5,r=d,v=q/r.s,u=[],D=new Ub,B=new Vb,C=f,K=null;this.a=new Oa(a,this);this.Pb=function(x){x=I(u,x,function(G){return G.za});if(0<=x){var w=u[x];Ia(D,w);h.removeChild(w);u.splice(x,1)}};this.a.addListener(this,function(x,w){t.length=0;z.length=0;n.frames.length=0;r=x;v=q/r.s;Ja(D,u);Ra(h,u);u.length=0;C=w;Ia(B,K);p.removeChild(K);K=null;l();m();g()});var t=[],z=[];l();m();g()}A(Tb,T);Tb.prototype.update=function(){this.position.x=this.b.f.m.position.x;this.position.y=this.b.f.m.position.y};
Tb.prototype.set=function(a){T.prototype.set.call(this,a);this.a.U(a.R,a.sb)};function Wb(a,b,c,d,e,f){J.call(this,a,J.a.Ga,null,0,0,e);this.P=d;this.size=.75*d;this.a=(d-this.size)/2;this.position.x=b*d+this.a;this.position.y=c*d+this.a;this.i=f;Xb(this)}A(Wb,J);function Xb(a){a.frames.length=0;a.frames.push(jb(0,0,a.size,a.size,null,a.i))}Wb.prototype.set=function(a){J.prototype.set.call(this,a);this.P=a.P;this.size=.75*a.P;this.position.x=a.La*a.P+this.a;this.position.y=a.Ma*a.P+this.a;Xb(this)};
function Yb(a,b,c,d,e){Wb.call(this,a,b,c,d,!0,Y.a.Ta);this.za=e}A(Yb,Wb);Yb.prototype.set=function(a){Wb.prototype.set.call(this,a);this.za=a.za};function Zb(a,b,c,d,e){Wb.call(this,a,b,c,d,!0,Y.a.Ua);this.ra=e}A(Zb,Wb);Zb.prototype.update=function(){this.position.x=this.P/this.b.c*this.ra.position.x;this.position.y=this.P/this.b.c*this.ra.position.y};Zb.prototype.set=function(a){Wb.prototype.set.call(this,a);this.ra=a.ra};function Ub(){this.a=[]}A(Ub,P);
Ub.prototype.g=function(a){return new Yb(a.b,a.La,a.Ma,a.P,a.za)};function Vb(){this.a=[]}A(Vb,P);Vb.prototype.g=function(a){return new Zb(a.b,a.La,a.Ma,a.P,a.ra)};function Pb(){this.a=[]}A(Pb,P);Pb.prototype.g=function(a){return new Rb(a.b,a.xb,a.yb)};function Nb(){this.a=[]}A(Nb,P);Nb.prototype.g=function(a){return new bb(a.b,a.x,a.y,a.R)};function Ob(){this.a=[]}A(Ob,P);Ob.prototype.g=function(a){return new Sb(a.b,a.x,a.y,a.ob,a.R)};function Qb(){this.a=[]}A(Qb,P);
Qb.prototype.g=function(a){return new Tb(a.b,a.x,a.y,a.R,a.Vb,a.sb)};var $b=Math.atan2(3,4);(new Y(20,10,64,{Ea:30*-Math.cos($b),Fa:30*-Math.sin($b),Ha:Math.atan(23/12)})).i();
