function ba(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function ca(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:ba(a)}}function da(a){if(!(a instanceof Array)){a=ca(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}
var ea="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},fa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function ha(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var k=ha(this);function y(a,b){if(b)a:{var c=k;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&fa(c,a,{configurable:!0,writable:!0,value:b})}}var ia;
if("function"==typeof Object.setPrototypeOf)ia=Object.setPrototypeOf;else{var ja;a:{var ka={Kb:!0},la={};try{la.__proto__=ka;ja=la.Kb;break a}catch(a){}ja=!1}ia=ja?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ma=ia;
function A(a,b){a.prototype=ea(b.prototype);a.prototype.constructor=a;if(ma)ma(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c]}y("Array.prototype.findIndex",function(a){return a?a:function(b,c){a:{var d=this;d instanceof String&&(d=String(d));for(var e=d.length,f=0;f<e;f++)if(b.call(c,d[f],f,d)){b=f;break a}b=-1}return b}});
y("Array.prototype.fill",function(a){return a?a:function(b,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}});function na(a){return a?a:Array.prototype.fill}y("Int8Array.prototype.fill",na);y("Uint8Array.prototype.fill",na);y("Uint8ClampedArray.prototype.fill",na);y("Int16Array.prototype.fill",na);y("Uint16Array.prototype.fill",na);y("Int32Array.prototype.fill",na);
y("Uint32Array.prototype.fill",na);y("Float32Array.prototype.fill",na);y("Float64Array.prototype.fill",na);
function oa(a,b,c,d){var e=this;this.canvas=document.createElement("canvas");this.canvas.width=c*a;this.canvas.height=c*b;this.a=this.canvas.getContext("2d");this.canvas.style.marginLeft="auto";this.canvas.style.marginRight="auto";this.canvas.style.display="block";this.s=new pa(new E(0,0),this.canvas.width,this.canvas.height);document.body.appendChild(this.canvas);this.c=c;this.P=d;this.children=[];this.Oa=[];this.ob=[];this.b=null;this.j=0;this.g=[];this.m=0;this.K=null;this.O={oa:null,ea:null};
this.H=[];document.addEventListener("keydown",function(f){e.O.ea&&e.O.ea(f);e.g.forEach(function(g){g.O.ea&&g.O.ea(f)})});document.addEventListener("keyup",function(f){e.O.oa&&e.O.oa(f);e.g.forEach(function(g){g.O.oa&&g.O.oa(f)})})}oa.prototype.start=function(){this.m=setInterval(this.D.bind(this),16.666);this.j=Date.now()};oa.prototype.stop=function(){clearInterval(this.m)};function qa(a){a.a.clearRect(0,0,a.canvas.width,a.canvas.height)}
oa.prototype.D=function(){var a=this;qa(this);var b=Date.now(),c=(b-this.j)/1E3;this.H.forEach(function(d){d.update(c)});this.j=b;this.Oa.forEach(function(d){if(d.Oa)d.Oa.some(function(e){if(e.J.i.V&&e.active)return e.update(c),!0});else if(d.J.i.V&&d.active)return d.update(c),!0});this.K&&(this.K.update(),ra(this.K,c));this.g.forEach(function(d){!d.fixed&&d.active&&(d.sa||(d.position.x+=d.speed.x*c),d.ta||(d.position.y+=d.speed.y*c));ta(d);ua(d)});this.g.forEach(function(d){d.ua&&(d.aa=(d.i.I.y+
.5*d.height)/a.c*a.P.Ca,d.ba=(d.i.I.y+.5*d.height)/a.c*a.P.Da);d.Xa=d.i.I.x+d.width-a.P.Ca+d.aa>a.s.position.x&&d.i.I.x+d.aa<a.s.position.x+a.s.width&&d.i.I.y+d.height-a.P.Da+d.ba>a.s.position.y&&d.i.I.y+d.ba<a.s.position.y+a.s.height?!0:!1});this.ob.forEach(function(d){var e=[];d.ma.forEach(function(f){f.Xa&&e.push(f)});e.sort(function(f,g){return f.position.x-g.position.x});e.forEach(function(f){var g=0,m=0,l=!1,n=Math.floor(f.position.y/a.c)+Math.floor((f.position.y+f.height)/a.c)+1,h=H(d.G.children,
f);d.G.children.splice(h,1);do d.G.children[g].frame||(m===n?(d.G.children.splice(g,0,f),l=!0):m++),g++;while(!l)})});va(this);this.g.forEach(function(d){var e=d.i.I.x+.5*d.width-a.s.position.x,f=d.i.I.y+.5*d.height-a.s.position.y;d.Xa&&(a.a.save(),a.a.translate(e+d.aa,f+d.ba),a.a.rotate(d.angle),a.a.scale(d.i.ga.x,d.i.ga.y),a.a.globalAlpha=d.i.Qa,d.Pb&&a.a.scale(-1,1),d.type===I.a.ka?a.a.drawImage(d.ub.image,d.Y.position.x,d.Y.position.y,d.Y.width,d.Y.height,-.5*d.width,-.5*d.height,d.Y.width,d.Y.height):
d.type===I.a.Va?(a.a.font=d.frame.font,a.a.fillStyle=d.frame.fillStyle,a.a.fillText(d.frame.text,-.5*d.width,.5*d.height)):d.type===I.a.Ea&&d.frames.forEach(function(g){wa(a.a,-.5*d.width,-.5*d.height,g.ab,g.fillStyle,null,null)}),a.a.restore())});this.b.update(c);this.g.forEach(function(d){d.active&&d.update(c)})};oa.prototype.v=function(a){a.parent&&a.parent.removeChild(a);this.children.push(a);a.parent=this;va(this);ta(a);ua(a);xa(a)};
oa.prototype.removeChild=function(a){this.children.splice(H(this.children,a,null),1);va(this)};function ya(a,b){a.Oa.push(b);return b}function va(a){a.g.length=0;for(var b=[],c=null,d=0;d<a.children.length;d++){if(a.children[d].visible){c=a.children[d];b.push(c);var e=!1}else e=!0;for(;!e;){for(var f=!0,g=c.cb;g<c.children.length;g++)if(c.children[g].visible){c.cb=g+1;c=c.children[g];b.push(c);f=!1;break}c.cb=0;f&&(c.parent!==a?c=c.parent:(e=!0,a.g=a.g.concat(b),b.length=0))}}}
function za(a,b,c,d){d=void 0===d?{Ca:0,Da:0,Fa:0}:d;this.f=new oa(a,b,c,d);this.canvas=this.f.canvas;this.g=this.f.a;this.fa=[];this.a=0;this.D=this.canvas.width;this.m=this.canvas.height;this.c=c;this.P=d}
function Ba(a){function b(){if(a.fa[a.a]){var c=a.fa[a.a];qa(a.f);var d=c.rows,e=[];a.canvas.width=d*c.Aa+2*d;var f=Math.ceil(c.tb.length/d);a.canvas.height=f*c.za+2*f;var g=0,m=-1;c.tb.forEach(function(l,n){n/d===g+1?(g++,m=0):m++;l.forEach(function(h){a.g.save();wa(a.g,m*c.Aa+2*m,g*c.za+2*g,h.ab,h.fillStyle,h.strokeStyle,h.lineWidth);a.g.restore();h.name&&e.push(new Ca(new E(m*c.Aa+2*m,g*c.za+2*g),c.Aa,c.za,h.name))})});c.image.src=a.canvas.toDataURL("image/png");c.sb=e;c.image.onload=function(){a.a<
a.fa.length-1?(a.a++,b()):(a.canvas.width=a.D,a.canvas.height=a.m,a.create())}}}a.D=a.canvas.width;a.m=a.canvas.height;a.a=0;b()}za.prototype.j=function(){};za.prototype.create=function(){this.f.b=this};za.prototype.update=function(){};function Da(a){var b=Math.ceil(0);a=Math.floor(a);return Math.floor(Math.random()*(a-b))+b}function Ea(){var a=J.a.Ua-1;var b=Math.ceil(0);a=Math.floor(a);return Math.floor(Math.random()*(a-b+1))+b}function Fa(a){return a[Da(a.length)]}
function H(a,b,c){c=void 0===c?null:c;var d=-1,e=!1;return d=c?a.findIndex(function(f){c(f)===b&&(e=!0);return e}):a.findIndex(function(f){f===b&&(e=!0);return e})}function Ga(a,b,c){b=H(a,b,c);return a[b]}function E(a,b){this.x=void 0===a?0:a;this.y=void 0===b?0:b}E.prototype.compare=function(a){return a?a.x===this.x&&a.y===this.y?!0:!1:!1};function K(a,b){a.x=b.x;a.y=b.y;return a}E.prototype.add=function(a){a&&(this.x+=a.x,this.y+=a.y)};
function Ca(a,b,c,d){this.position=a;this.width=b;this.height=c;this.name=void 0===d?"":d}function pa(a,b,c){Ca.call(this,a,b,c)}A(pa,Ca);function M(){this.a=[]}function Ha(a,b){b.reset();a.a.push(b)}function Ia(a,b){for(var c=0;c<b.length;c++)Ha(a,b[c])}function Q(a,b){if(0<a.a.length){var c=a.a[a.a.length-1];c.set(b);a.a.splice(a.a.length-1,1)}else c=a.g(b);return c}M.prototype.g=function(){return{}};
function La(a,b,c,d){this.image=document.createElement("img");this.sb=null;this.rows=a;this.Aa=b;this.za=c;this.tb=d}
function I(a,b,c,d,e,f,g,m,l,n){g=void 0===g?a.fa[0]:g;l=void 0===l?g.Aa:l;n=void 0===n?g.za:n;this.active=!0;this.b=a;this.type=b;this.Z=[];this.frame=this.frames=null;this.ub=g;this.width=l;this.height=n;this.ua=void 0===m?!1:m;this.mb=this.width;this.lb=this.height;this.Y=null;Ma(this,b,c);this.Pb=!1;this.kb=new E(0,0);this.ba=this.aa=0;this.Xa=!0;f?this.fixed=f:this.fixed=!1;this.position=new E(d,e);this.speed=new E(0,0);this.j=new E(0,0);this.children=[];this.parent=null;this.visible=!0;this.O=
{oa:null,ea:null};this.angle=0;this.scale=new E(1,1);this.cb=0;this.alpha=1;this.L=new E(0,0);this.ta=this.sa=!1;this.Ha=null;this.Ma=new Na(a,this);this.pb=new Na(a,this);this.i={I:new E(1,1),ga:new E(1,1),Qa:1,V:!1};ua(this);this.eb=!0}function xa(a){a.L.x=Math.floor(Math.floor(a.position.x/a.b.f.c));a.L.y=Math.floor(Math.floor(a.position.y/a.b.f.c))}
function ta(a){K(a.i.I,a.position);K(a.i.ga,a.scale);a.i.Qa=a.alpha;a.i.V=a.visible;for(var b=a.parent;b!==a.b.f&&b;)a.i.I.x+=b.position.x,a.i.I.y+=b.position.y,a.i.ga.x*=b.scale.x,a.i.ga.y*=b.scale.y,a.i.Qa*=b.alpha,a.i.V&&!b.visible&&(a.i.V=!1),b=b.parent,a.i.V&&!b&&(a.i.V=!1)}
function Ma(a,b,c){b=void 0===b?I.a.ka:b;c=void 0===c?[]:c;Array.isArray(c)?a.frames=c:a.frames=[c];a.frame=a.frames[0];a.Y=null;if(b===I.a.ka)Oa(a);else if(b===I.a.Va){b=a.b;var d=a.frame;c=b.f.a.font;b.f.a.font=d.font;d=b.f.a.measureText(d.text).width;b.f.a.font=c;a.width=d}}function Oa(a){for(var b=0;b<a.frames.length;b++)a.Z.push(Ga(a.ub.sb,a.frames[b],function(c){return c.name}));a.Y=a.Z[0]}I.prototype.update=function(){};function Pa(a,b){a.visible=b;va(a.b.f);ta(a)}
function ua(a){a.j.x=a.i.I.x+.5*a.width;a.j.y=a.i.I.y+.5*a.height}I.prototype.v=function(a){a.parent&&a.parent.removeChild(a);this.children.push(a);a.parent=this;va(this.b.f);ta(a);ua(a);xa(a)};I.prototype.removeChild=function(a){var b=-1;b=this.children.findIndex(function(c){return c===a?!0:!1});0<=b&&(this.children.splice(b,1),a.parent=null);va(this.b.f)};function Qa(a,b){b.forEach(function(c){a.removeChild(c)})}
function Ra(a){a.children.forEach(function(b){b.parent=null});a.children.length=0;va(a.b.f)}I.prototype.reset=function(){this.position.x=0;this.position.y=0;this.speed.x=0;this.angle=this.speed.y=0};I.prototype.set=function(a){a.x?this.position.x=a.x:this.position.x=0;a.y?this.position.y=a.y:this.position.y=0;a.frames&&(this.Z.length=0,Ma(this,a.type,a.frames));a.fixed?this.fixed=a.fixed:this.fixed=!1;Pa(this,!0);this.active=!0;ua(this);xa(this)};
k.Object.defineProperties(I,{a:{configurable:!0,enumerable:!0,get:function(){return{ka:0,Va:1,Ea:2}}},F:{configurable:!0,enumerable:!0,get:function(){return 0}}});function R(a,b,c){I.call(this,a,null,null,b,c,!0)}A(R,I);function Sa(a,b,c,d,e,f,g){I.call(this,a,I.a.ka,b,c,d,!0,void 0,e,f,g)}A(Sa,I);k.Object.defineProperties(Sa,{F:{configurable:!0,enumerable:!0,get:function(){return 1}}});function Ta(){this.a=[]}A(Ta,M);Ta.prototype.g=function(a){return new Sa(a.b,a.frames,a.x,a.y,a.ua,a.width,a.height)};
function Ua(a){I.call(this,a,null,null,0,0,!0,!1);this.D=new Ta;this.Ba=new Ta;this.D=new Ta;this.Pa=new Ta;this.ca=[this.D,this.Ba,this.D,this.Pa];this.ma=[];this.wa=[];this.ya=[];this.H=[];this.va=[];this.g=[this.va,this.ya,this.wa,this.H];this.m=new R(a,0,0);this.G=new R(a,0,0);this.a=new R(a,0,0);this.v(this.m);this.v(this.G);this.v(this.a)}A(Ua,I);function Va(a,b){(b=void 0===b?null:b)&&Wa(b,a.H,!0);Ra(a.m);Ra(a.G);Ra(a.a);a.g.forEach(function(c,d){Ia(a.ca[d],c);c.length=0})}
function Xa(a,b,c){c=void 0===c?null:c;for(var d=0;d<b.A;d++){a.G.v(new R(a.b,0,0));a.G.v(new R(a.b,0,0));for(var e=0;e<b.u;e++)if(b.h[e][d].T)for(var f=0;4>f;f++){var g=Q(a.ca[f],{b:a.b,frames:b.h[e][d].frames[f],x:e*a.b.f.c,y:d*a.b.f.c,ua:!0,width:a.b.c,height:a.b.c});a.g[f].push(g);1!==f&&2!==f||a.G.children[a.G.children.length-1-(1-(f-1))].v(g);1===f?e<b.u-1&&0<b.h[e+1][d].T&&Pa(g,!1):(2===f||0===f)&&d<b.A-1&&0<b.h[e][d+1].T&&Pa(g,!1)}}for(d=1;d<a.G.children.length-1;d+=2)e=ca([a.G.children[d+
1],a.G.children[d]]),a.G.children[d]=e.next().value,a.G.children[d+1]=e.next().value;va(a.b.f);a.g[3].forEach(function(m){a.a.v(m)});a.g[0].forEach(function(m){a.m.v(m)});c&&(Ya(c,b),a.a.children.forEach(function(m){Za(c,m)}))}function $a(a){var b=ab.F;a.H.forEach(function(c){c.Ha=b})}function bb(a,b){a.ma.push(b);a.G.v(b)}function cb(a,b){b.forEach(function(c){a.ma.splice(H(a.ma,c),1);a.G.removeChild(c)})}
function S(a,b,c,d){this.J=a;this.duration=b;d?this.type=d:this.type=S.a;this.Na=null;this.va=this.gb=c;this.g=0;this.active=!1;this.a=0;this.Pa=null;this.ca=!0;this.H=this.m=this.wa=0}S.prototype.qa=function(){};S.prototype.D=function(a){a&&(this.duration=a)};function db(a){a.H=2*a.m/Math.pow(a.duration,2);a.Pa=a.H*a.duration;a.H*=-1}
S.prototype.update=function(a){if(this.active&&a&&(this.a+=a,this.a>this.duration&&(this.a=this.duration),this.type===S.a?this.g=this.a*this.wa/this.m:this.type===S.g&&(this.g=(this.Pa*this.a+.5*this.H*Math.pow(this.a,2))/this.m),this.ca||(this.g=1-this.g),this.a===this.duration)){this.a=0;this.update(0);a:{if(0<=this.gb&&(this.va--,0>this.va)){this.active=!1;this.va=this.gb;this.ca=!0;this.a=this.g=0;this.Na&&this.Na(this);a=!0;break a}a=!1}a||(this.ca=this.ca?!1:!0)}};
k.Object.defineProperties(S,{a:{configurable:!0,enumerable:!0,get:function(){return 1}},g:{configurable:!0,enumerable:!0,get:function(){return 2}}});function T(a,b,c,d,e,f){S.call(this,a,b,c,d);this.Ba=this.ya=0;this.j=new E(0,0);this.Z=new E(0,0);this.qa(e,f)}A(T,S);T.prototype.update=function(a){S.prototype.update.call(this,a)};
T.prototype.qa=function(a,b){K(this.j,a);K(this.Z,b);this.ya=this.Z.x-this.j.x;this.Ba=this.Z.y-this.j.y;a=this.j;b=this.Z;this.m=Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2));this.D(null);db(this)};T.prototype.D=function(a){S.prototype.D.call(this,a);this.wa=this.m/this.duration};function eb(a,b,c,d,e,f){T.call(this,a,b,c,d,e,f)}A(eb,T);eb.prototype.update=function(a){T.prototype.update.call(this,a);this.active&&(this.J.position.x=this.j.x+this.g*this.ya,this.J.position.y=this.j.y+this.g*this.Ba)};
function fb(a,b,c,d,e,f){T.call(this,a,b,c,d,e,f)}A(fb,T);fb.prototype.update=function(a){T.prototype.update.call(this,a);this.active&&(this.J.scale.x=this.j.x+this.g*this.ya,this.J.scale.y=this.j.y+this.g*this.Ba)};function gb(a,b,c,d,e,f){S.call(this,a,b,c,d);this.j=0;this.qa(e,f)}A(gb,S);gb.prototype.qa=function(a,b){this.j=a;this.m=b-a;this.D(null);db(this)};gb.prototype.D=function(a){S.prototype.D.call(this,a);this.wa=this.m/this.duration};
gb.prototype.update=function(a){S.prototype.update.call(this,a);this.active&&(this.J.alpha=this.j+this.g*this.m)};function wa(a,b,c,d,e,f,g){b||(b=0);c||(c=0);e&&(a.fillStyle=e);f&&(a.strokeStyle=f);g&&(a.lineWidth=g);a.beginPath();a.moveTo(d[0].x+b,d[0].y+c);for(f=1;f<d.length;f++)a.lineTo(d[f].x+b,d[f].y+c),e||a.stroke();a.closePath();e&&a.fill()}
function hb(a,b,c,d,e){this.ab=a;this.name=void 0===b?"":b;this.fillStyle=void 0===c?null:c;this.strokeStyle=void 0===d?null:d;this.lineWidth=void 0===e?null:e}function ib(a,b){var c=void 0===c?"":c;var d=void 0===d?100:d;var e=void 0===e?0:e;var f=void 0===f?0:f;c||(c="circle");e||(e=0);f||(f=2*Math.PI);d||(d=100);var g=[];f=(f-e)/d;for(var m=0;m<d;m++)g[m]=new E(Math.cos(m*f+e)*a+a+0,-Math.sin(m*f+e)*a+a+0);return new hb(g,c,void 0===b?null:b,null,null)}
function jb(a,b,c,d,e,f){return new hb([new E(a,b),new E(a+c,b),new E(a+c,b+d),new E(a,b+d),new E(a,b)],e,f,null,null)}function kb(a,b,c){c=void 0===c?null:c;var d=null;d="object"===typeof c?function(g,m,l){m[l].push(JSON.parse(JSON.stringify(g)))}:function(g,m,l){m[l].push(g)};this.h=[];this.u=a;this.A=b;for(var e=0;e<a;e++){this.h.push([]);for(var f=0;f<b;f++)d(c,this.h,e)}this.length=a*b;this.a=lb(this)}kb.prototype.getAll=function(){return this.a};
function lb(a){for(var b=[],c=0;c<a.length;c++){var d=Math.floor(c/a.u),e=c-d*a.u;b.push({da:a.h[e][d],x:e,y:d})}return b}function mb(a,b,c){kb.call(this,b,c,{S:[],T:!1});this.b=a}A(mb,kb);function Ya(a,b){b.getAll().forEach(function(c){c.da.T&&(a.h[c.x][c.y].T=!0)})}function Za(a,b){var c=nb(a,b);a.h[c.x][c.y].S.push(b)}function ob(a,b,c){c=void 0===c?!1:c;a.getAll().some(function(d){if(d.da.S.some(function(e,f){if(e===b)return d.da.S.splice(f,1),c&&(d.da.T=!1),!0}))return!0})}
function Wa(a,b,c){c=void 0===c?!1:c;b.forEach(function(d){ob(a,d,c)})}mb.prototype.update=function(){var a=this,b=[];this.getAll().forEach(function(c){c.da.S.forEach(function(d){if(!d.fixed){var e=new E(c.x,c.y),f=nb(a,d);f.compare(e)||b.push({J:d,La:e,Ya:f})}})});b.forEach(function(c){var d=H(a.h[c.La.x][c.La.y].S,c.J,null);a.h[c.La.x][c.La.y].S.splice(d,1)});b.forEach(function(c){a.h[c.Ya.x][c.Ya.y].S.push(c.J);K(c.J.L,c.Ya);c.J.pb.X()})};
function ra(a,b){a.getAll().forEach(function(c){c.da.S.forEach(function(d){d.sa=!1;d.ta=!1})});a.getAll().forEach(function(c){c.da.S.forEach(function(d){d.i.V&&pb(a,d,c.x,c.y,b)})})}
function pb(a,b,c,d,e){function f(C,v){var p=0;v&&!C.ta&&(p=C.speed.y*e);return C.position.y+C.kb.y+p+C.height/2}function g(C,v){var p=0;v&&!C.sa&&(p=C.speed.x*e);return C.position.x+C.kb.x+p+C.width/2}var m=!1;m=void 0===m?!1:m;e=void 0===e?0:e;var l=!1,n=[],h=[],q=0,w=0,t=0,r=0;h.push(new E(g(b,!0),f(b,!1)));h.push(new E(g(b,!1),f(b,!0)));var x=c-3;0>x&&(x=0);var D=c+3;D>a.u&&(D=a.u);c=d-3;0>c&&(c=0);var F=d+3;F>a.A&&(F=a.A);d={};for(d.ia=x;d.ia<D;d={ia:d.ia},d.ia++)for(x={},x.ja=c;x.ja<F;x={ja:x.ja},
x.ja++)a.h[d.ia][x.ja].S.forEach(function(C,v){return function(p){if(p.i.V&&p!==b&&p.constructor.F&b.Ha){n.length=0;n.push(new E(g(p,!0),f(p,!1)));n.push(new E(g(p,!1),f(p,!0)));l=!1;for(var z=0;2>z;z++)q=n[z].x-h[z].x,w=n[z].y-h[z].y,t=p.mb/2+b.mb/2,r=p.lb/2+b.lb/2,Math.abs(q)<t&&Math.abs(w)<r&&(l=!0,m?(C.ja=F,v.ia=D):0===z?b.eb&&(p.sa=!0):b.eb&&(p.ta=!0));!m&&l&&(b.Ma.X(b,p),p.Ma.X(p,b))}}}(x,d))}
function nb(a,b){var c=new E(b.L.x,b.L.y);b.speed.x?b.sa&&b.speed.x?c.x=Math.round(b.position.x/a.b.f.c):0>b.speed.x&&b.position.x<=(c.x-1)*a.b.f.c?c.x--:0<b.speed.x&&b.position.x>=(c.x+1)*a.b.f.c&&c.x++:c.x=Math.round(b.position.x/a.b.f.c);b.speed.y?b.ta&&b.speed.y?c.y=Math.round(b.position.y/a.b.f.c):0>b.speed.y&&b.position.y<=(c.y-1)*a.b.f.c?c.y--:0<b.speed.y&&b.position.y>=(c.y+1)*a.b.f.c&&c.y++:c.y=Math.round(b.position.y/a.b.f.c);return c}function Na(a,b){this.b=a;this.J=b;this.a=[]}
Na.prototype.X=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];var d=this;this.a.forEach(function(e){for(var f=d.J;f&&(e.Rb!==f||(e.Lb.apply(e,da(b)),!e.terminate));)f.parent?f=f.parent:f=null})};Na.prototype.addListener=function(a,b,c){a=new qb(a,b,void 0===c?!1:c);this.a.push(a);return a};function qb(a,b,c){this.Rb=a;this.Lb=b;this.terminate=void 0===c?!1:c};function J(){this.W=[];this.W.push({id:J.a.E,N:new E(1,0),Ga:[]},{id:J.a.Cb,N:new E(0,-1),Ga:[]},{id:J.a.Ib,N:new E(-1,0),Ga:[]},{id:J.a.Ua,N:new E(0,1),Ga:[]},{id:J.a.NONE,N:new E(0,0),Ga:[]})}k.Object.defineProperties(J,{a:{configurable:!0,enumerable:!0,get:function(){return{E:1,Cb:2,Ib:3,Ua:4,NONE:5}}},g:{configurable:!0,enumerable:!0,get:function(){return new J}}});function rb(a,b){this.h=[];this.u=a;this.A=b;for(var c=0;c<a;c++){var d=[];this.h.push(d);for(var e=0;e<b;e++)d.push(!1)}}
function sb(a){a.h.forEach(function(b){for(var c=0;c<b.length;c++)b[c]=!1})}function tb(a,b){this.h=[];this.u=a;this.A=b;this.la=J.g;for(var c=0;c<a;c++){var d=[];this.h.push(d);for(var e=0;e<b;e++)d.push({filled:!1,Qb:!1,na:[!0,!0,!0,!0]})}}tb.prototype.forEach=function(a){for(var b=0;b<this.u;b++)for(var c=0;c<this.A;c++)a(this.h[b][c],b,c)};function ub(){this.a=[]}A(ub,M);ub.prototype.g=function(a){return new vb(a.position,a.direction)};function wb(){this.a=[]}A(wb,M);
wb.prototype.g=function(a){return new U(a.h,a.start,a.end,a.o,a.C)};function xb(){this.a=[]}A(xb,M);xb.prototype.g=function(a){return new Ab(a.l,a.start,a.end,a.B,a.C,a.U)};function vb(a,b){this.position=a?new E(a.x,a.y):new E(0,0);b?this.direction=b:this.direction=J.a.NONE}vb.prototype.reset=function(){this.direction=J.a.NONE;this.position.x=0;this.position.y=0};vb.prototype.set=function(a){K(this.position,a.position);this.direction=a.direction};
function U(a,b,c,d,e){this.h=a;this.start=b?new E(b.x,b.y):new E(0,0);this.end=c?new E(c.x,c.y):new E(0,0);this.C=e;if(d)for(this.o=[],a=0;a<d.length-1;a++)this.o.push(Q(this.C,{position:d[a].position,direction:d[a].direction}));else this.o=[],this.o.push(Q(this.C,{position:b,direction:J.a.NONE}));this.Ia=this.bb=!1}U.prototype.reset=function(){Ia(this.C,this.o);this.o.length=0;this.Ia=this.bb=!1};
U.prototype.set=function(a){K(this.start,a.start);K(this.end,a.end);this.h=a.h;if(a.o)for(var b=0;b<a.o.length-1;b++)this.o.push(Q(this.C,{position:a.o[b].position,direction:a.o[b].direction}));else this.o.push(Q(this.C,{position:a.start,direction:J.a.NONE}))};k.Object.defineProperties(U,{a:{configurable:!0,enumerable:!0,get:function(){return{zb:1,jb:2,hb:4,Db:8}}}});
function Ab(a,b,c,d,e,f){this.l=a;this.C=e;this.U=f;b||(b=new E(0,0));c||(c=new E(0,0));this.a=new rb(a.u,a.A);d?this.B=d:(this.B=[],this.B.push(Q(this.U,{h:a,start:b,end:c,o:null,C:this.C})))}
Ab.prototype.process=function(){var a=0,b=0,c=!1,d=!1;if(this.B[0].start.compare(this.B[0].end))d=!0;else{do if(this.B[a].bb||this.B[a].Ia)a<this.B.length-1?a++:d?(a=0,d=!1):c=!0;else{a:{var e=this.B[a];var f=this.a,g=e.o[e.o.length-1],m=0,l=new E(0,0);g.direction!==J.a.NONE&&(m=g.direction);for(var n=m;n<J.a.Ua;n++){m=e.h.la.W[n];var h=g.position,q=m.N;K(l,new E(h.x+q.x,h.y+q.y));if(h=l.x<e.h.u&&0<=l.x&&l.y<e.h.A&&0<=l.y)if(h=!e.h.h[l.x][l.y].filled){h=!1;for(q=0;q<e.o.length;q++)if(e.o[q].position.x===
l.x&&e.o[q].position.y===l.y){h=!0;break}h=!h}if(h){n=!1;l.compare(e.end)&&(n=!0);if(n){g.direction=m.id;e.bb=!0;e.o.push(Q(e.C,{position:l,direction:J.a.NONE}));e=U.a.jb;break a}n=U.a.hb;f.h[l.x][l.y]?e.Ia=!0:f.h[l.x][l.y]=!0;g.direction=m.id;e.o.push(Q(e.C,{position:l,direction:J.a.NONE}));e=n;break a}}e.Ia=!0;e=U.a.zb}e===U.a.hb?(this.B.push(Q(this.U,{h:this.l,start:this.B[a].start,end:this.B[a].end,o:this.B[a].o,C:this.C})),a++,d||(d=!0)):e===U.a.Db?d||(d=!0):e===U.a.jb&&(b=a,c=!0,d||(d=!0))}while(!c)
}return{Vb:d,qb:b}};Ab.prototype.set=function(a){this.l=a.l;this.B.push(Q(this.U,{h:this.l,start:a.start,end:a.end,o:null,C:this.C}));this.l.u!==this.a.u||this.l.A!==this.a.A?this.a=new rb(this.l.u,this.l.A):sb(this.a)};Ab.prototype.reset=function(){Ia(this.U,this.B);this.B.length=0};function Bb(a,b,c){this.C=a;this.U=b;this.g=c;this.l=null;this.a=[]}
function Cb(a,b,c){function d(l){f.push(new E(l.x,l.y));for(var n=l.x-1;n<l.x+1;n++)for(var h=l.y-1;h<l.y+1;h++)Db(e,new E(n,h))}for(var e=[],f=[],g=3;g<a.l.u-2-2;g++)for(var m=3;m<a.l.A-2-2;m++)e.push(new E(g,m));for(g={};0<b&&0<e.length;)g.$=Fa(e),0===f.length?(d(g.$),b--):f.some(function(l){return function(n){if(6>Math.abs(l.$.x-n.x)&&6>Math.abs(l.$.y-n.y))return!0}}(g))?Db(e,g.$):(d(g.$),b--),g={$:g.$};f.forEach(function(l){for(var n=l.x-1;n<l.x+1+1;n++)for(var h={},q=l.y-1;q<l.y+1+1;h={ha:h.ha},
q++)h.ha=a.l.h[n][q],h.ha.filled=!0,h.ha.Qb=!1,h.ha.na.forEach(function(w){return function(t,r){w.ha.na[r]=!1}}(h)),Db(c,new E(n,q))});return f}
function Eb(a,b,c,d){d=void 0===d?0:d;a.l=new tb(b,c);var e=[];b=[];var f=[];for(c=0;c<a.l.u;c++)for(var g=0;g<a.l.A;g++)e.push(new E(c,g));d=Cb(a,d,e);g=Fa(e);c=K(new E,g);g=Fa(e);g=K(new E,g);var m=!1,l={};do{var n=Q(a.g,{l:a.l,start:c,end:g,B:null,C:a.C,U:a.U}),h=n.process();h.Vb?(h=n.B[h.qb],l.ra=J.a.NONE,h.o.forEach(function(q){return function(w){var t=a.l.h[w.position.x][w.position.y];w.direction!==J.a.NONE&&(t.na[w.direction-1]=!1);if(q.ra!==J.a.NONE){var r=a.l.la.W[q.ra-1].N,x=H(a.l.la.W,
!0,function(D){var F=!1;D.N.x===-1*r.x&&D.N.y===-1*r.y&&(F=!0);return F});t.na[x]=!1}q.ra=w.direction;t.filled=!0;Db(e,w.position);f.push(new E(w.position.x,w.position.y))}}(l)),0<e.length?(K(c,Fa(f)),Db(f,c),b=da(e).concat(),K(g,Fa(b)),Db(b,g)):m=!0):(0<b.length||(K(c,Fa(f)),Db(f,c),b=da(e).concat()),K(g,Fa(b)),Db(b,g));Ha(a.g,n);l={ra:l.ra}}while(!m);a.a.length=0;d.forEach(function(q){var w=a.l.la.W[Ea()].N,t=H(a.l.la.W,!0,function(D){var F=!1;D.N.x===-1*w.x&&D.N.y===-1*w.y&&(F=!0);return F}),r=
2*w.x,x=2*w.y;a.a.push(new E(q.x+r,q.y+x));a.l.h[q.x+r][q.y+x].na[t]=!1});return a.l}function Db(a,b){var c=H(a,!0,function(d){var e=!1;d.x===b.x&&d.y===b.y&&(e=!0);return e});0<=c&&a.splice(c,1)};function V(a,b,c,d){za.call(this,a,b,c,d);window.addEventListener("keydown",function(e){-1<[37,38,39,40].indexOf(e.keyCode)&&e.preventDefault()},!1)}A(V,za);
V.prototype.j=function(){za.prototype.j.call(this);var a=[],b=[],c=(88-this.c)/Math.cos(this.P.Fa);a.push(W(this,this.c/2,c,"w0",1,this.c/2));a.push(W(this,this.c,c,"w1",2));a.push(W(this,this.c/2,c,"w2",1));a.push(W(this,this.c,c,"w3",4));a.push(W(this,this.c,c,"w4",8));a.push(W(this,this.c,c,"w5",16));a.push(W(this,this.c,c,"w6",32));a.push([jb(0,0,0,0,"w7",V.a.ib)]);a.push(W(this,this.c/3,c/8,"pg",7,0,0,V.a.Sa,V.a.Ab,V.a.Bb));a.push(W(this,2/3*this.c,2/3*c,"p1",7,0,0,V.a.Ra,V.a.xb,V.a.yb));a.push(W(this,
2/3*this.c,2/3*c,"p2",7,0,0,V.a.Ta,V.a.Gb,V.a.Hb));b.push([jb(0,0,this.f.s.width,this.f.s.height,"b",V.a.Jb)]);this.fa.push(new La(10,88,81,a));this.fa.push(new La(1,this.f.s.width,this.f.s.height,b));Ba(this)};V.prototype.create=function(){var a=this;za.prototype.create.call(this);var b=new Fb(this,0,0);this.f.v(b);var c=new Gb(this,0,0);b.v(c);var d=new Hb(this,0,0);Pa(d,!1);b.v(d);this.f.start();this.f.O.ea=function(){c.visible&&(Pa(c,!1),Pa(d,!0),a.f.stop(),d.g(),a.f.start())}};
function W(a,b,c,d,e,f,g,m,l,n){e=void 0===e?7:e;f=void 0===f?0:f;g=void 0===g?0:g;m=void 0===m?V.a.ib:m;l=void 0===l?V.a.Eb:l;n=void 0===n?V.a.Fb:n;var h=c*Math.sin(a.P.Fa);a=c*Math.cos(a.P.Fa);c=[];e&1&&(c.push(jb(0,h,b,35,d,m)),d="");e&2&&(c.push(new hb([new E(a+b,0),new E(a+b,35),new E(b,h+35),new E(b,h),new E(a+b,0)],d,n)),d="");e&4&&c.push(new hb([new E(a,0),new E(a+b,0),new E(b,h),new E(0,h),new E(a,0)],d,l));e&8&&c.push(new hb([new E(a+b,0),new E(b,h),new E(0,h),new E(a+b,0)],d,l));e&16&&
c.push(new hb([new E(a,0),new E(a+b,0),new E(0,h),new E(a,0)],d,l));e&32&&c.push(new hb([new E(a+b,0),new E(a+b,35),new E(0,h+35),new E(0,h),new E(a+b,0)],d,n));c.forEach(function(q){q.ab.forEach(function(w){w.x+=f;w.y+=g})});return c}k.Object.defineProperties(V,{a:{configurable:!0,enumerable:!0,get:function(){return{ib:"#ff71ce",Eb:"#ff24b3",Fb:"#d6008d",Ra:"#01cdfe",xb:"#018fb2",yb:"#015165",Sa:"#05ffa1",Ab:"#00b873",Bb:"#006b43",Ta:"#b967ff",Gb:"#951aff",Hb:"#6e00cc",Jb:"#fffb9f"}}}});
function Ib(a,b,c,d){this.Ob=a;this.Ub=b;this.size=c;this.Mb=d}function Jb(a,b,c,d,e,f){e=void 0===e?V.a.Sa:e;I.call(this,a,I.a.Va,{font:"bold "+(void 0===f?32:f)+"px serif",text:d,fillStyle:e},b,c,!0)}A(Jb,I);function Fb(a,b,c){R.call(this,a,b,c);this.a=new I(a,I.a.ka,["b"],0,0,!1,a.fa[1]);this.v(this.a)}A(Fb,R);Fb.prototype.update=function(){this.a.position.x=this.b.f.s.position.x;this.a.position.y=this.b.f.s.position.y};
function Gb(a,b,c){R.call(this,a,b,c);var d=this;b=new I(a,I.a.Ea,[new hb([new E(0,0),new E(450,250),new E(90,425),new E(0,0)],"",V.a.Ta)],b,c,!0,!1);b.width=450;b.height=425;b.position.x=(a.f.s.width-b.width)/2;b.position.y=(a.f.s.height-b.height)/2;this.v(b);b=new Jb(a,0,0,"Information Super Highway",void 0,a.c);b.position.x=(a.f.s.width-b.width)/2;this.v(b);b=new Jb(a,0,0,"Press any key");b.position.x=(a.f.s.width-b.width)/2;b.position.y=a.f.s.height-2*b.height;this.v(b);var e=["w6","w6","w7"];
b=da(e).concat(["w4"]);c=da(["w0","w1","w2"]).concat(["w3"]);e=da(e).concat(["w5"]);var f=[[],c,b,e];b=[[0,0,2,1,0],[0,2,3,1,0],[2,3,0,1,0],[1,1,1,1,1],[0,0,0,1,0]];var g=[];[b,[[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,1,1,1,1]],b].forEach(function(l){for(var n=new Ua(a),h=new kb(5,5,{frames:[],T:!1,ua:!0}),q=0;5>q;q++)for(var w=0;5>w;w++)if(l[w][q]){var t=h.h[q][w];t.T=!0;t.frames=f[l[w][q]]}Xa(n,h);n.width=h.u*a.c;n.height=h.A*a.c;d.v(n);g.push(n)});var m=(5*g.length+(g.length-1))*a.c;
g.forEach(function(l,n){l.position.y=(d.b.f.s.height-l.height)/2;l.position.y+=(l.position.y+.5*l.height)/a.c*-a.P.Ca;l.position.x=(l.position.y+.5*l.height)/a.c*-a.P.Ca+(a.f.s.width-m)/2+m/g.length*n});ya(a.f,new eb(g[0],1,0,S.a,new E(g[0].position.x,-g[0].height),new E(g[0].position.x,g[0].position.y))).active=!0;ya(a.f,new eb(g[1],1,0,S.a,new E(g[1].position.x,a.f.s.height+g[1].height),new E(g[1].position.x,g[1].position.y))).active=!0;ya(a.f,new eb(g[2],1,0,S.a,new E(g[2].position.x,-g[2].height),
new E(g[2].position.x,g[2].position.y))).active=!0}A(Gb,R);
function Hb(a,b,c){function d(){Va(f.a,a.f.K);Ha(n,r);var v=f.a,p=r;v.ma.splice(H(v.ma,p),1);v.G.removeChild(p);ob(a.f.K,r);r=null;Ia(q,x);cb(f.a,x);Wa(a.f.K,x);x.length=0;Ia(h,D);cb(f.a,D);Wa(a.f.K,D);D.length=0;Ha(w,t);f.removeChild(t);t=null}function e(v,p,z){z=void 0===z?1:z;var u=p.u*(z+1)+1,B=p.A*(z+1)+1,O=new kb(u,B,{frames:[],T:!1,ua:!0}),L=new tb(u,B);p.h.forEach(function(Y,N){Y.forEach(function(G,sa){G.na.forEach(function(Z,P){if(Z){Z=l.l.la.W[P].N;for(var Aa=(z+1)*N+(1+z/2),aa=(z+1)*sa+
(1+z/2),Ja=Aa-((z+1)*N+1),Ka=-Ja-1;Ka<Ja+1;Ka++){var yb=Aa+Ka*(1-Math.abs(Z.x))+Z.x*(Ja+Math.abs(Math.min(Z.x,0))),zb=aa+Ka*(1-Math.abs(Z.y))+Z.y*(Ja+Math.abs(Math.min(Z.y,0)));P=O.h[yb][zb];P.T=!0;0===P.frames.length&&(P.frames=v,L.h[yb][zb].filled=!0)}}})})});return{Sb:O,R:L}}R.call(this,a,b,c);var f=this;b=new ub;c=new wb;var g=new xb,m=new mb(a,100,100);a.f.K=m;this.a=new Ua(a);this.v(this.a);a.f.ob.push(this.a);var l=new Bb(b,c,g),n=new Kb,h=new Lb,q=new Mb,w=new Nb,t=null,r=null,x=[],D=[],F=
[new Ib(10,5,5,0),new Ib(15,7,8,0),new Ib(50,10,10,1),new Ib(70,13,14,2)],C=0;this.g=function(v){v=void 0===v?F[C]:v;var p=Eb(l,v.size,v.size,v.Mb);p=e(["w0","w1","w2","w3"],p,3);Xa(f.a,p.Sb,a.f.K);$a(f.a);p=p.R;var z=[];p.forEach(function(Y,N,G){Y.filled||z.push(new E(N,G))});var u=Fa(z);r=Q(n,{b:a,x:u.x*a.c,y:u.y*a.c,R:p});r.$a.addListener(f,function(Y){t.Nb(Y);Pa(Y,!1);Y.active=!1;!x.some(function(N){return N.visible})&&C<F.length-1&&(f.b.f.stop(),d(),C++,f.g(F[C]),f.b.f.start())});r.Za.addListener(f,
function(){f.b.f.stop();d();f.g(F[C]);f.b.f.start()});Za(a.f.K,r);for(u=0;u<v.Ob;u++){var B=Q(h,{b:a,x:0,y:0,nb:z,R:p});D.push(B);Za(a.f.K,B);bb(f.a,B);B.navigate()}u=da(z).concat();for(B=0;B<v.Ub;B++){var O=Da(u.length),L=u[O];L=Q(q,{b:a,vb:L.x,wb:L.y});x.push(L);u.splice(O,1);Za(a.f.K,L);bb(f.a,L)}t=Q(w,{b:a,x:0,y:0,R:p,Tb:x,rb:r});f.v(t);bb(f.a,r)}}A(Hb,R);function X(a,b,c,d,e,f){e=void 0===e?2/3*a.c:e;f=void 0===f?2/3*a.c:f;I.call(this,a,I.a.ka,b,c,d,!1,void 0,!0,e,f);this.D=new Na(a,this)}
A(X,I);function Ob(a,b,c){X.call(this,a,["pg"],0,0,a.c/3,a.c/8);this.position.x=b*a.c+(a.c-this.width)/2;this.position.y=c*a.c+(a.c-this.height)/2;this.eb=!1}A(Ob,X);Ob.prototype.set=function(a){X.prototype.set.call(this,a);this.position.x=a.vb*this.b.c+(this.b.c-this.width)/2;this.position.y=a.wb*this.b.c+(this.b.c-this.height)/2};k.Object.defineProperties(Ob,{F:{configurable:!0,enumerable:!0,get:function(){return 32}}});
function ab(a,b,c,d){X.call(this,a,["p2"],b,c);var e=this;this.position.x+=(a.c-this.width)/2;this.position.y+=(a.c-this.height)/2;this.g=new E(1,0);this.$a=new Na(a,this);this.Za=new Na(a,this);this.H=3*this.b.c;var f=new E(1,1),g=new E(0,0),m=ya(a.f,new fb(this,.5,0,S.a,f,g)),l=ya(this.b.f,new gb(this,.2,11,S.a,1,.2)),n=!0;l.active=!0;l.Na=function(){n=!1};m.Na=function(){e.Za.X()};this.D.addListener(this,function(){m.qa(f,g);m.active=!1;l.qa(1,.2);n=l.active=!0});this.m=new E(0,0);this.m.x=d.u*
a.c;this.m.y=d.A*(a.c+(a.P.Da+1));this.Ma.addListener(this,function(h,q){n||m.active||q.constructor.F!==Pb.F?q.constructor.F===Ob.F&&e.$a.X(q):m.active=!0});this.a={left:!1,right:!1,fb:!1,Wa:!1};this.O.ea=function(h){if(39===h.keyCode||"d"===h.key||"D"===h.key)e.a.right=!0;else if(37===h.keyCode||"a"===h.key||"A"===h.key)e.a.left=!0;if(38===h.keyCode||"w"===h.key||"W"===h.key)e.a.fb=!0;else if(40===h.keyCode||"s"===h.key||"S"===h.key)e.a.Wa=!0};this.O.oa=function(h){if(39===h.keyCode||"d"===h.key||
"D"===h.key)e.a.right=!1;else if(37===h.keyCode||"a"===h.key||"A"===h.key)e.a.left=!1;else if(38===h.keyCode||"w"===h.key||"W"===h.key)e.a.fb=!1;else if(40===h.keyCode||"s"===h.key||"S"===h.key)e.a.Wa=!1};this.Ha=Sa.F+Pb.F+Ob.F}A(ab,X);
ab.prototype.update=function(){this.speed.x=0;this.speed.y=0;this.a.right?(this.g.x=1,this.g.y=0,this.speed.x=this.H):this.a.left&&(this.g.x=-1,this.g.y=0,this.speed.x=-this.H);this.a.fb?(this.g.x=0,this.g.y=-1,this.speed.y=-this.H):this.a.Wa&&(this.g.x=0,this.g.y=1,this.speed.y=this.H);this.b.f.s.position.x=this.j.x+this.b.canvas.width/2>this.m.x?this.m.x+this.aa-this.b.canvas.width:this.j.x>this.b.canvas.width/2?this.j.x+this.aa-this.b.canvas.width/2:this.aa;this.b.f.s.position.y=this.j.y+this.ba+
this.b.canvas.height/2>this.m.y?this.m.y-this.b.canvas.height:this.j.y+this.ba>this.b.canvas.height/2?this.j.y+this.ba-this.b.canvas.height/2:0};ab.prototype.reset=function(){X.prototype.reset.call(this);this.$a.a.length=0;this.Za.a.length=0};ab.prototype.set=function(a){X.prototype.set.call(this,a);this.m.x=a.R.u*this.b.c;this.m.y=a.R.A*(this.b.c+(this.b.P.Da+1));this.position.x+=(this.b.c-this.width)/2;this.position.y+=(this.b.c-this.height)/2;this.scale.x=1;this.scale.y=1;this.D.X()};
k.Object.defineProperties(ab,{F:{configurable:!0,enumerable:!0,get:function(){return 2}}});
function Pb(a,b,c,d,e){function f(v){v=void 0===v?!1:v;var p=da(q).concat(),z=null,u=0;z=!1;if(v)for(;!z;)u=Da(p.length),a.f.K.h[p[u].x][p[u].y].S.some(function(B){if(B.constructor.F===ab.F||B.constructor.F===Pb.F)return!0})?p.splice(u,1):z=!0;else u=H(p,!0,function(B){var O=!1;g.L.x===B.x&&g.L.y===B.y&&(O=!0);return O});z=p[u];p.splice(u,1);v=Q(n,{l:w,start:z,end:Fa(p),B:null,C:m,U:l});p=v.process();return v.B[p.qb]}X.call(this,a,["p1"],b,c);var g=this,m=new ub,l=new wb,n=new xb,h=!1,q=d,w=e;this.D.addListener(this,
function(v,p){q=v;w=p;r=0;x=-1;h=!1;t=f(!0);D=t.o[r].position;g.position.x=D.x*a.c+(a.c-g.width)/2;g.position.y=D.y*a.c+(a.c-g.height)/2});var t=f(!0),r=0,x=-1,D=t.o[r].position;this.position.x=D.x*a.c+(a.c-this.width)/2;this.position.y=D.y*a.c+(a.c-this.height)/2;var F=1.5*a.c,C=new J;this.navigate=function(){var v=!1,p=C.W[t.o[r].direction-1].N;x!==p&&(g.position.x=g.L.x*a.c+(a.c-g.width)/2,g.position.y=g.L.y*a.c+(a.c-g.height)/2);h?(g.speed.x=-p.x*F,g.speed.y=-p.y*F,0===r?(r=-1,h=!1):x=p):(g.speed.x=
p.x*F,g.speed.y=p.y*F,0===p.x&&0===p.y?(h=!0,r--,v=!0):x=p);return v};this.pb.addListener(this,function(){h?r--:r++;g.navigate()&&g.navigate()});this.Ha=ab.F}A(Pb,X);Pb.prototype.reset=function(){X.prototype.reset.call(this);this.Ma.a.length=0};Pb.prototype.set=function(a){X.prototype.set.call(this,a);this.D.X(a.nb,a.R)};k.Object.defineProperties(Pb,{F:{configurable:!0,enumerable:!0,get:function(){return 4}}});
function Qb(a,b,c,d,e,f){function g(){v=Q(F,{b:a,Ja:C.L.x,Ka:C.L.y,M:r,pa:C});q.v(v)}function m(){e.forEach(function(u){u=Q(D,{b:a,Ja:u.L.x,Ka:u.L.y,M:r,xa:u});h.v(u);x.push(u)})}function l(){t.h.forEach(function(G,sa){for(G=0;G<t.A;G++)if(t.h[sa][G].filled){for(var Z=new E(sa,G),P,Aa=!1,aa=G+1;!Aa&&aa<t.A;){P=t.h[sa][aa];if(!P.filled||P.filled&&aa===t.A-1)Aa=!0,1<aa-G&&(P=new E(sa,aa),aa===t.A-1&&P.y++,p.push([Z,P]));aa++}G=aa}});for(var u=0;u<t.A;u++)for(var B=0;B<t.u;B++)if(t.h[B][u].filled){for(var O=
new E(B,u),L=null,Y=!1,N=B+1;!Y&&N<t.u;){L=t.h[N][u];if(!L.filled||L.filled&&N===t.u-1)Y=!0,1<N-B&&(L=new E(N,u),N===t.u-1&&L.x++,z.push([O,L]));N++}B=N}p.forEach(function(G){n.frames.push(jb(G[0].x*r,G[0].y*r,r,(G[1].y-G[0].y)*r,void 0,V.a.Ra))});z.forEach(function(G){n.frames.push(jb(G[0].x*r,G[0].y*r,(G[1].x-G[0].x)*r,r,void 0,V.a.Ra))})}R.call(this,a,b,c);var n=new I(a,I.a.Ea,null,0,0,!0);n.frames.length=0;this.v(n);var h=new R(a,0,0);this.v(h);var q=new R(a,0,0);this.v(q);var w=this.b.canvas.width/
5,t=d,r=w/t.u,x=[],D=new Rb,F=new Sb,C=f,v=null;this.a=new Na(a,this);this.Nb=function(u){u=H(x,u,function(O){return O.xa});if(0<=u){var B=x[u];Ha(D,B);h.removeChild(B);x.splice(u,1)}};this.a.addListener(this,function(u,B){p.length=0;z.length=0;n.frames.length=0;t=u;r=w/t.u;Ia(D,x);Qa(h,x);x.length=0;C=B;Ha(F,v);q.removeChild(v);v=null;l();m();g()});var p=[],z=[];l();m();g()}A(Qb,R);Qb.prototype.update=function(){this.position.x=this.b.f.s.position.x;this.position.y=this.b.f.s.position.y};
Qb.prototype.set=function(a){R.prototype.set.call(this,a);this.a.X(a.R,a.rb)};function Tb(a,b,c,d,e,f){I.call(this,a,I.a.Ea,null,0,0,e);this.M=d;this.a=.375*d;this.position.x=b*d+(d/2-this.a);this.position.y=c*d+(d/2-this.a);this.g=f;Ub(this)}A(Tb,I);function Ub(a){a.frames.length=0;a.frames.push(ib(a.a,a.g))}Tb.prototype.set=function(a){I.prototype.set.call(this,a);this.M=a.M;this.a=.375*a.M;this.position.x=a.Ja*a.M+(a.M/2-this.a);this.position.y=a.Ka*a.M+(a.M/2-this.a);Ub(this)};
function Vb(a,b,c,d,e){Tb.call(this,a,b,c,d,!0,V.a.Sa);this.xa=e}A(Vb,Tb);Vb.prototype.set=function(a){Tb.prototype.set.call(this,a);this.xa=a.xa};function Wb(a,b,c,d,e){Tb.call(this,a,b,c,d,!0,V.a.Ta);this.pa=e}A(Wb,Tb);Wb.prototype.update=function(){this.position.x=this.M/this.b.c*this.pa.position.x;this.position.y=this.M/this.b.c*this.pa.position.y};Wb.prototype.set=function(a){Tb.prototype.set.call(this,a);this.pa=a.pa};function Rb(){this.a=[]}A(Rb,M);
Rb.prototype.g=function(a){return new Vb(a.b,a.Ja,a.Ka,a.M,a.xa)};function Sb(){this.a=[]}A(Sb,M);Sb.prototype.g=function(a){return new Wb(a.b,a.Ja,a.Ka,a.M,a.pa)};function Mb(){this.a=[]}A(Mb,M);Mb.prototype.g=function(a){return new Ob(a.b,a.vb,a.wb)};function Kb(){this.a=[]}A(Kb,M);Kb.prototype.g=function(a){return new ab(a.b,a.x,a.y,a.R)};function Lb(){this.a=[]}A(Lb,M);Lb.prototype.g=function(a){return new Pb(a.b,a.x,a.y,a.nb,a.R)};function Nb(){this.a=[]}A(Nb,M);
Nb.prototype.g=function(a){return new Qb(a.b,a.x,a.y,a.R,a.Tb,a.rb)};var Xb=Math.atan2(3,4);(new V(20,10,64,{Ca:30*-Math.cos(Xb),Da:30*-Math.sin(Xb),Fa:Math.atan(23/12)})).j();
